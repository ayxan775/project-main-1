"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/categories";
exports.ids = ["pages/api/categories"];
exports.modules = {

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sqlite3":
/*!**************************!*\
  !*** external "sqlite3" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("sqlite3");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "sqlite":
/*!*************************!*\
  !*** external "sqlite" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("sqlite");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcategories&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcategories.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcategories&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcategories.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_categories_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/categories.ts */ \"(api)/./pages/api/categories.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_categories_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_categories_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/categories\",\n        pathname: \"/api/categories\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_categories_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNhdGVnb3JpZXMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmNhdGVnb3JpZXMudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDc0Q7QUFDdEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHFEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxxREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlLXJlYWN0LXR5cGVzY3JpcHQtc3RhcnRlci8/NzdmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2NhdGVnb3JpZXMudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jYXRlZ29yaWVzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2F0ZWdvcmllc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcategories&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcategories.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/categories.ts":
/*!*********************************!*\
  !*** ./pages/api/categories.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _src_lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../src/lib/db */ \"(api)/./src/lib/db.ts\");\n/* harmony import */ var _src_lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../src/lib/auth */ \"(api)/./src/lib/auth.ts\");\n\n\nasync function handler(req, res) {\n    try {\n        // Set proper JSON content type\n        res.setHeader(\"Content-Type\", \"application/json\");\n        // Handle GET method (list all categories)\n        if (req.method === \"GET\") {\n            const db = await (0,_src_lib_db__WEBPACK_IMPORTED_MODULE_0__.getDB)();\n            const categories = await db.all(\"SELECT * FROM categories ORDER BY name ASC\");\n            return res.status(200).json(categories);\n        }\n        // For all other methods, verify authentication\n        const token = req.headers.authorization?.split(\" \")[1];\n        if (!token) {\n            return res.status(401).json({\n                message: \"Authentication required\"\n            });\n        }\n        try {\n            await (0,_src_lib_auth__WEBPACK_IMPORTED_MODULE_1__.verifyToken)(token);\n        } catch (error) {\n            return res.status(401).json({\n                message: \"Invalid token\"\n            });\n        }\n        // Handle POST method (create)\n        if (req.method === \"POST\") {\n            const { name, description } = req.body;\n            if (!name) {\n                return res.status(400).json({\n                    message: \"Category name is required\"\n                });\n            }\n            const db = await (0,_src_lib_db__WEBPACK_IMPORTED_MODULE_0__.getDB)();\n            // Check if category already exists\n            const existing = await db.get(\"SELECT * FROM categories WHERE name = ?\", [\n                name\n            ]);\n            if (existing) {\n                return res.status(400).json({\n                    message: \"Category already exists\"\n                });\n            }\n            const result = await db.run(\"INSERT INTO categories (name, description) VALUES (?, ?)\", [\n                name,\n                description || \"\"\n            ]);\n            const newCategory = await db.get(\"SELECT * FROM categories WHERE id = ?\", [\n                result.lastID\n            ]);\n            return res.status(201).json(newCategory);\n        }\n        // Handle PUT method (update)\n        if (req.method === \"PUT\" && req.query.id) {\n            const { name, description } = req.body;\n            if (!name) {\n                return res.status(400).json({\n                    message: \"Category name is required\"\n                });\n            }\n            const db = await (0,_src_lib_db__WEBPACK_IMPORTED_MODULE_0__.getDB)();\n            // Check if category exists\n            const existing = await db.get(\"SELECT * FROM categories WHERE id = ?\", [\n                req.query.id\n            ]);\n            if (!existing) {\n                return res.status(404).json({\n                    message: \"Category not found\"\n                });\n            }\n            // Check if new name conflicts with another category\n            const nameConflict = await db.get(\"SELECT * FROM categories WHERE name = ? AND id != ?\", [\n                name,\n                req.query.id\n            ]);\n            if (nameConflict) {\n                return res.status(400).json({\n                    message: \"Category name already exists\"\n                });\n            }\n            await db.run(\"UPDATE categories SET name = ?, description = ? WHERE id = ?\", [\n                name,\n                description || \"\",\n                req.query.id\n            ]);\n            const updatedCategory = await db.get(\"SELECT * FROM categories WHERE id = ?\", [\n                req.query.id\n            ]);\n            return res.status(200).json(updatedCategory);\n        }\n        // Handle DELETE method\n        if (req.method === \"DELETE\" && req.query.id) {\n            const db = await (0,_src_lib_db__WEBPACK_IMPORTED_MODULE_0__.getDB)();\n            // Check if category exists\n            const category = await db.get(\"SELECT * FROM categories WHERE id = ?\", [\n                req.query.id\n            ]);\n            if (!category) {\n                return res.status(404).json({\n                    message: \"Category not found\"\n                });\n            }\n            // Check if category is in use\n            const productsUsingCategory = await db.get(\"SELECT COUNT(*) as count FROM products WHERE category = ?\", [\n                category.name\n            ]);\n            if (productsUsingCategory.count > 0) {\n                return res.status(400).json({\n                    message: \"Cannot delete category that is being used by products\"\n                });\n            }\n            await db.run(\"DELETE FROM categories WHERE id = ?\", [\n                req.query.id\n            ]);\n            return res.status(200).json({\n                message: \"Category deleted successfully\"\n            });\n        }\n        // Handle unsupported methods\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    } catch (error) {\n        console.error(\"Categories API error:\", error);\n        return res.status(500).json({\n            message: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU9aLElBQUlNLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUssU0FBUztRQUFxQjtJQUM5RCxFQUFFLE9BQU9DLE9BQU87UUFDZGlCLFFBQVFqQixLQUFLLENBQUMseUJBQXlCQTtRQUN2QyxPQUFPYixJQUFJTSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVLLFNBQVM7UUFBd0I7SUFDakU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGUtcmVhY3QtdHlwZXNjcmlwdC1zdGFydGVyLy4vcGFnZXMvYXBpL2NhdGVnb3JpZXMudHM/NDNhZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBnZXREQiB9IGZyb20gJy4uLy4uL3NyYy9saWIvZGInO1xuaW1wb3J0IHsgdmVyaWZ5VG9rZW4gfSBmcm9tICcuLi8uLi9zcmMvbGliL2F1dGgnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIHRyeSB7XG4gICAgLy8gU2V0IHByb3BlciBKU09OIGNvbnRlbnQgdHlwZVxuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG5cbiAgICAvLyBIYW5kbGUgR0VUIG1ldGhvZCAobGlzdCBhbGwgY2F0ZWdvcmllcylcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0REIoKTtcbiAgICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBkYi5hbGwoJ1NFTEVDVCAqIEZST00gY2F0ZWdvcmllcyBPUkRFUiBCWSBuYW1lIEFTQycpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGNhdGVnb3JpZXMpO1xuICAgIH1cblxuICAgIC8vIEZvciBhbGwgb3RoZXIgbWV0aG9kcywgdmVyaWZ5IGF1dGhlbnRpY2F0aW9uXG4gICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5zcGxpdCgnICcpWzFdO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcgfSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ0ludmFsaWQgdG9rZW4nIH0pO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBQT1NUIG1ldGhvZCAoY3JlYXRlKVxuICAgIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHJlcS5ib2R5O1xuXG4gICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0NhdGVnb3J5IG5hbWUgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYiA9IGF3YWl0IGdldERCKCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIGNhdGVnb3J5IGFscmVhZHkgZXhpc3RzXG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IGRiLmdldCgnU0VMRUNUICogRlJPTSBjYXRlZ29yaWVzIFdIRVJFIG5hbWUgPSA/JywgW25hbWVdKTtcbiAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnQ2F0ZWdvcnkgYWxyZWFkeSBleGlzdHMnIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5ydW4oXG4gICAgICAgICdJTlNFUlQgSU5UTyBjYXRlZ29yaWVzIChuYW1lLCBkZXNjcmlwdGlvbikgVkFMVUVTICg/LCA/KScsXG4gICAgICAgIFtuYW1lLCBkZXNjcmlwdGlvbiB8fCAnJ11cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG5ld0NhdGVnb3J5ID0gYXdhaXQgZGIuZ2V0KCdTRUxFQ1QgKiBGUk9NIGNhdGVnb3JpZXMgV0hFUkUgaWQgPSA/JywgW3Jlc3VsdC5sYXN0SURdKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbihuZXdDYXRlZ29yeSk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIFBVVCBtZXRob2QgKHVwZGF0ZSlcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ1BVVCcgJiYgcmVxLnF1ZXJ5LmlkKSB7XG4gICAgICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uIH0gPSByZXEuYm9keTtcblxuICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdDYXRlZ29yeSBuYW1lIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGIgPSBhd2FpdCBnZXREQigpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBjYXRlZ29yeSBleGlzdHNcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgZGIuZ2V0KCdTRUxFQ1QgKiBGUk9NIGNhdGVnb3JpZXMgV0hFUkUgaWQgPSA/JywgW3JlcS5xdWVyeS5pZF0pO1xuICAgICAgaWYgKCFleGlzdGluZykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnQ2F0ZWdvcnkgbm90IGZvdW5kJyB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgbmV3IG5hbWUgY29uZmxpY3RzIHdpdGggYW5vdGhlciBjYXRlZ29yeVxuICAgICAgY29uc3QgbmFtZUNvbmZsaWN0ID0gYXdhaXQgZGIuZ2V0KFxuICAgICAgICAnU0VMRUNUICogRlJPTSBjYXRlZ29yaWVzIFdIRVJFIG5hbWUgPSA/IEFORCBpZCAhPSA/JywgXG4gICAgICAgIFtuYW1lLCByZXEucXVlcnkuaWRdXG4gICAgICApO1xuICAgICAgaWYgKG5hbWVDb25mbGljdCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnQ2F0ZWdvcnkgbmFtZSBhbHJlYWR5IGV4aXN0cycgfSk7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGRiLnJ1bihcbiAgICAgICAgJ1VQREFURSBjYXRlZ29yaWVzIFNFVCBuYW1lID0gPywgZGVzY3JpcHRpb24gPSA/IFdIRVJFIGlkID0gPycsXG4gICAgICAgIFtuYW1lLCBkZXNjcmlwdGlvbiB8fCAnJywgcmVxLnF1ZXJ5LmlkXVxuICAgICAgKTtcblxuICAgICAgY29uc3QgdXBkYXRlZENhdGVnb3J5ID0gYXdhaXQgZGIuZ2V0KCdTRUxFQ1QgKiBGUk9NIGNhdGVnb3JpZXMgV0hFUkUgaWQgPSA/JywgW3JlcS5xdWVyeS5pZF0pO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHVwZGF0ZWRDYXRlZ29yeSk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIERFTEVURSBtZXRob2RcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0RFTEVURScgJiYgcmVxLnF1ZXJ5LmlkKSB7XG4gICAgICBjb25zdCBkYiA9IGF3YWl0IGdldERCKCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIGNhdGVnb3J5IGV4aXN0c1xuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBhd2FpdCBkYi5nZXQoJ1NFTEVDVCAqIEZST00gY2F0ZWdvcmllcyBXSEVSRSBpZCA9ID8nLCBbcmVxLnF1ZXJ5LmlkXSk7XG4gICAgICBpZiAoIWNhdGVnb3J5KSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdDYXRlZ29yeSBub3QgZm91bmQnIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiBjYXRlZ29yeSBpcyBpbiB1c2VcbiAgICAgIGNvbnN0IHByb2R1Y3RzVXNpbmdDYXRlZ29yeSA9IGF3YWl0IGRiLmdldChcbiAgICAgICAgJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIHByb2R1Y3RzIFdIRVJFIGNhdGVnb3J5ID0gPycsXG4gICAgICAgIFtjYXRlZ29yeS5uYW1lXVxuICAgICAgKTtcblxuICAgICAgaWYgKHByb2R1Y3RzVXNpbmdDYXRlZ29yeS5jb3VudCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgICAgbWVzc2FnZTogJ0Nhbm5vdCBkZWxldGUgY2F0ZWdvcnkgdGhhdCBpcyBiZWluZyB1c2VkIGJ5IHByb2R1Y3RzJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgZGIucnVuKCdERUxFVEUgRlJPTSBjYXRlZ29yaWVzIFdIRVJFIGlkID0gPycsIFtyZXEucXVlcnkuaWRdKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdDYXRlZ29yeSBkZWxldGVkIHN1Y2Nlc3NmdWxseScgfSk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHVuc3VwcG9ydGVkIG1ldGhvZHNcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBtZXNzYWdlOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDYXRlZ29yaWVzIEFQSSBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbImdldERCIiwidmVyaWZ5VG9rZW4iLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2V0SGVhZGVyIiwibWV0aG9kIiwiZGIiLCJjYXRlZ29yaWVzIiwiYWxsIiwic3RhdHVzIiwianNvbiIsInRva2VuIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzcGxpdCIsIm1lc3NhZ2UiLCJlcnJvciIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImJvZHkiLCJleGlzdGluZyIsImdldCIsInJlc3VsdCIsInJ1biIsIm5ld0NhdGVnb3J5IiwibGFzdElEIiwicXVlcnkiLCJpZCIsIm5hbWVDb25mbGljdCIsInVwZGF0ZWRDYXRlZ29yeSIsImNhdGVnb3J5IiwicHJvZHVjdHNVc2luZ0NhdGVnb3J5IiwiY291bnQiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/categories.ts\n");

/***/ }),

/***/ "(api)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"your-secret-key\";\nasync function verifyToken(token) {\n    return new Promise((resolve, reject)=>{\n        jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET, (err, decoded)=>{\n            if (err) {\n                reject(err);\n            } else {\n                resolve(decoded);\n            }\n        });\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStCO0FBRS9CLE1BQU1DLGFBQWFDLFFBQVFDLEdBQUcsQ0FBQ0YsVUFBVSxJQUFJO0FBRXRDLGVBQWVHLFlBQVlDLEtBQWE7SUFDN0MsT0FBTyxJQUFJQyxRQUFRLENBQUNDLFNBQVNDO1FBQzNCUiwwREFBVSxDQUFDSyxPQUFPSixZQUFZLENBQUNTLEtBQUtDO1lBQ2xDLElBQUlELEtBQUs7Z0JBQ1BGLE9BQU9FO1lBQ1QsT0FBTztnQkFDTEgsUUFBUUk7WUFDVjtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGUtcmVhY3QtdHlwZXNjcmlwdC1zdGFydGVyLy4vc3JjL2xpYi9hdXRoLnRzPzY2OTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuXG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAneW91ci1zZWNyZXQta2V5JztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVRva2VuKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGp3dC52ZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQsIChlcnIsIGRlY29kZWQpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKGRlY29kZWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0gIl0sIm5hbWVzIjpbImp3dCIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwidmVyaWZ5IiwiZXJyIiwiZGVjb2RlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(api)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closeDB: () => (/* binding */ closeDB),\n/* harmony export */   getDB: () => (/* binding */ getDB),\n/* harmony export */   initializeDB: () => (/* binding */ initializeDB)\n/* harmony export */ });\n// Check if we're running on the server to avoid errors in the browser\nconst isServer = \"undefined\" === \"undefined\";\n// Initialize database\nasync function initializeDB() {\n    if (!isServer) {\n        throw new Error(\"Database operations can only be performed on the server\");\n    }\n    try {\n        // Dynamic imports to avoid issues with client-side code\n        const { open } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! sqlite */ \"sqlite\"));\n        const sqlite3 = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! sqlite3 */ \"sqlite3\", 23));\n        const bcrypt = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! bcryptjs */ \"bcryptjs\", 23));\n        const path = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! path */ \"path\", 23));\n        const url = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! url */ \"url\", 23));\n        const fs = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs */ \"fs\", 23));\n        // Setup paths\n        const __filename = url.fileURLToPath(\"file:///home/home/Desktop/project-main/src/lib/db.ts\");\n        const __dirname = path.dirname(__filename);\n        const DB_PATH = path.join(process.cwd(), \"data.db\");\n        console.log(\"Initializing database at:\", DB_PATH);\n        const db = await open({\n            filename: DB_PATH,\n            driver: sqlite3.default.Database\n        });\n        console.log(\"Connected to database\");\n        // Create tables if they don't exist\n        await db.exec(`\n      CREATE TABLE IF NOT EXISTS users (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        username TEXT UNIQUE NOT NULL,\n        password TEXT NOT NULL,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      );\n\n      CREATE TABLE IF NOT EXISTS categories (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        name TEXT UNIQUE NOT NULL,\n        description TEXT,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      );\n\n      CREATE TABLE IF NOT EXISTS products (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        name TEXT NOT NULL,\n        description TEXT,\n        image TEXT,\n        specs TEXT,\n        useCases TEXT,\n        category TEXT,\n        images TEXT,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        FOREIGN KEY (category) REFERENCES categories(name)\n      );\n    `);\n        console.log(\"Database tables created\");\n        // Check if admin user exists, if not create it\n        const adminUser = await db.get(\"SELECT * FROM users WHERE username = ?\", [\n            \"admin\"\n        ]);\n        if (!adminUser) {\n            const hashedPassword = await bcrypt.hash(\"Azerbaycan123\", 10);\n            await db.run(\"INSERT INTO users (username, password) VALUES (?, ?)\", [\n                \"admin\",\n                hashedPassword\n            ]);\n            console.log(\"Admin user created\");\n        }\n        // Initialize default categories if none exist\n        const categoriesCount = await db.get(\"SELECT COUNT(*) as count FROM categories\");\n        if (categoriesCount.count === 0) {\n            const defaultCategories = [\n                {\n                    name: \"Industrial Equipment\",\n                    description: \"Heavy-duty industrial machinery and equipment\"\n                },\n                {\n                    name: \"Safety Gear\",\n                    description: \"Personal protective equipment and safety solutions\"\n                },\n                {\n                    name: \"Measurement Tools\",\n                    description: \"Precision measurement and testing instruments\"\n                },\n                {\n                    name: \"Fluid Control\",\n                    description: \"Valves, pumps, and fluid management systems\"\n                },\n                {\n                    name: \"Power Systems\",\n                    description: \"Power generation and electrical equipment\"\n                },\n                {\n                    name: \"Construction Equipment\",\n                    description: \"Tools and equipment for construction projects\"\n                }\n            ];\n            for (const category of defaultCategories){\n                await db.run(\"INSERT INTO categories (name, description) VALUES (?, ?)\", [\n                    category.name,\n                    category.description\n                ]);\n            }\n        }\n        // Import initial products data if table is empty\n        const productsCount = await db.get(\"SELECT COUNT(*) as count FROM products\");\n        if (productsCount.count === 0) {\n            try {\n                // Try to load products from JSON file\n                const fs = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs */ \"fs\", 23));\n                const path = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! path */ \"path\", 23));\n                const productsJsonPath = path.join(process.cwd(), \"src\", \"data\", \"products.json\");\n                let products = [];\n                if (fs.existsSync(productsJsonPath)) {\n                    // Read JSON file\n                    const productsJson = fs.readFileSync(productsJsonPath, \"utf8\");\n                    products = JSON.parse(productsJson);\n                    console.log(\"Loaded products from JSON file\");\n                } else {\n                    // Fallback to default product\n                    products = [\n                        {\n                            id: 1,\n                            name: \"Sample Product\",\n                            description: \"A sample product created automatically\",\n                            image: \"https://placehold.co/600x400?text=Sample+Product\",\n                            specs: [\n                                \"Sample specification 1\",\n                                \"Sample specification 2\"\n                            ],\n                            useCases: [\n                                \"Sample use case 1\",\n                                \"Sample use case 2\"\n                            ],\n                            category: \"Sample Category\"\n                        }\n                    ];\n                    console.log(\"Using default product as fallback\");\n                }\n                // Insert products\n                for (const product of products){\n                    await db.run(\"INSERT INTO products (id, name, description, image, specs, useCases, category) VALUES (?, ?, ?, ?, ?, ?, ?)\", [\n                        product.id,\n                        product.name,\n                        product.description,\n                        product.image,\n                        JSON.stringify(product.specs),\n                        JSON.stringify(product.useCases),\n                        product.category\n                    ]);\n                }\n                console.log(`${products.length} products inserted into database`);\n            } catch (error) {\n                console.error(\"Error importing initial products:\", error);\n            }\n        }\n        // Store the db instance in module state\n        dbInstance = db;\n        return db;\n    } catch (error) {\n        console.error(\"Database initialization error:\", error);\n        throw error;\n    }\n}\n// Get database instance\nlet dbInstance = null;\nasync function getDB() {\n    if (!isServer) {\n        throw new Error(\"Database operations can only be performed on the server\");\n    }\n    if (!dbInstance) {\n        dbInstance = await initializeDB();\n    }\n    return dbInstance;\n}\n// Close database connection\nasync function closeDB() {\n    if (!isServer) {\n        throw new Error(\"Database operations can only be performed on the server\");\n    }\n    if (dbInstance) {\n        await dbInstance.close();\n        dbInstance = null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBLE9BQU9tRDtBQUNUO0FBRUEsNEJBQTRCO0FBQ3JCLGVBQWVFO0lBQ3BCLElBQUksQ0FBQ3RELFVBQVU7UUFDYixNQUFNLElBQUlFLE1BQU07SUFDbEI7SUFFQSxJQUFJa0QsWUFBWTtRQUNkLE1BQU1BLFdBQVdHLEtBQUs7UUFDdEJILGFBQWE7SUFDZjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZS1yZWFjdC10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ2hlY2sgaWYgd2UncmUgcnVubmluZyBvbiB0aGUgc2VydmVyIHRvIGF2b2lkIGVycm9ycyBpbiB0aGUgYnJvd3NlclxuY29uc3QgaXNTZXJ2ZXIgPSB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJztcblxuLy8gVHlwZSBmb3IgZGF0YWJhc2UgaW5zdGFuY2VcbnR5cGUgREJJbnN0YW5jZSA9IGFueTtcblxuLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVEQigpIHtcbiAgaWYgKCFpc1NlcnZlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2Ugb3BlcmF0aW9ucyBjYW4gb25seSBiZSBwZXJmb3JtZWQgb24gdGhlIHNlcnZlcicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBEeW5hbWljIGltcG9ydHMgdG8gYXZvaWQgaXNzdWVzIHdpdGggY2xpZW50LXNpZGUgY29kZVxuICAgIGNvbnN0IHsgb3BlbiB9ID0gYXdhaXQgaW1wb3J0KCdzcWxpdGUnKTtcbiAgICBjb25zdCBzcWxpdGUzID0gYXdhaXQgaW1wb3J0KCdzcWxpdGUzJyk7XG4gICAgY29uc3QgYmNyeXB0ID0gYXdhaXQgaW1wb3J0KCdiY3J5cHRqcycpO1xuICAgIGNvbnN0IHBhdGggPSBhd2FpdCBpbXBvcnQoJ3BhdGgnKTtcbiAgICBjb25zdCB1cmwgPSBhd2FpdCBpbXBvcnQoJ3VybCcpO1xuICAgIGNvbnN0IGZzID0gYXdhaXQgaW1wb3J0KCdmcycpO1xuXG4gICAgLy8gU2V0dXAgcGF0aHNcbiAgICBjb25zdCBfX2ZpbGVuYW1lID0gdXJsLmZpbGVVUkxUb1BhdGgoaW1wb3J0Lm1ldGEudXJsKTtcbiAgICBjb25zdCBfX2Rpcm5hbWUgPSBwYXRoLmRpcm5hbWUoX19maWxlbmFtZSk7XG4gICAgY29uc3QgREJfUEFUSCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnZGF0YS5kYicpO1xuXG4gICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBkYXRhYmFzZSBhdDonLCBEQl9QQVRIKTtcbiAgICBcbiAgICBjb25zdCBkYiA9IGF3YWl0IG9wZW4oe1xuICAgICAgZmlsZW5hbWU6IERCX1BBVEgsXG4gICAgICBkcml2ZXI6IHNxbGl0ZTMuZGVmYXVsdC5EYXRhYmFzZVxuICAgIH0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdDb25uZWN0ZWQgdG8gZGF0YWJhc2UnKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgdGFibGVzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcbiAgICBhd2FpdCBkYi5leGVjKGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHVzZXJzIChcbiAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgICB1c2VybmFtZSBURVhUIFVOSVFVRSBOT1QgTlVMTCxcbiAgICAgICAgcGFzc3dvcmQgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgICApO1xuXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBjYXRlZ29yaWVzIChcbiAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgICBuYW1lIFRFWFQgVU5JUVVFIE5PVCBOVUxMLFxuICAgICAgICBkZXNjcmlwdGlvbiBURVhULFxuICAgICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgICk7XG5cbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHByb2R1Y3RzIChcbiAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgICBuYW1lIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgIGRlc2NyaXB0aW9uIFRFWFQsXG4gICAgICAgIGltYWdlIFRFWFQsXG4gICAgICAgIHNwZWNzIFRFWFQsXG4gICAgICAgIHVzZUNhc2VzIFRFWFQsXG4gICAgICAgIGNhdGVnb3J5IFRFWFQsXG4gICAgICAgIGltYWdlcyBURVhULFxuICAgICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIEZPUkVJR04gS0VZIChjYXRlZ29yeSkgUkVGRVJFTkNFUyBjYXRlZ29yaWVzKG5hbWUpXG4gICAgICApO1xuICAgIGApO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSB0YWJsZXMgY3JlYXRlZCcpO1xuXG4gICAgLy8gQ2hlY2sgaWYgYWRtaW4gdXNlciBleGlzdHMsIGlmIG5vdCBjcmVhdGUgaXRcbiAgICBjb25zdCBhZG1pblVzZXIgPSBhd2FpdCBkYi5nZXQoJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/JywgWydhZG1pbiddKTtcbiAgICBcbiAgICBpZiAoIWFkbWluVXNlcikge1xuICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCgnQXplcmJheWNhbjEyMycsIDEwKTtcbiAgICAgIGF3YWl0IGRiLnJ1bihcbiAgICAgICAgJ0lOU0VSVCBJTlRPIHVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQpIFZBTFVFUyAoPywgPyknLFxuICAgICAgICBbJ2FkbWluJywgaGFzaGVkUGFzc3dvcmRdXG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coJ0FkbWluIHVzZXIgY3JlYXRlZCcpO1xuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemUgZGVmYXVsdCBjYXRlZ29yaWVzIGlmIG5vbmUgZXhpc3RcbiAgICBjb25zdCBjYXRlZ29yaWVzQ291bnQgPSBhd2FpdCBkYi5nZXQoJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIGNhdGVnb3JpZXMnKTtcbiAgICBpZiAoY2F0ZWdvcmllc0NvdW50LmNvdW50ID09PSAwKSB7XG4gICAgICBjb25zdCBkZWZhdWx0Q2F0ZWdvcmllcyA9IFtcbiAgICAgICAgeyBuYW1lOiAnSW5kdXN0cmlhbCBFcXVpcG1lbnQnLCBkZXNjcmlwdGlvbjogJ0hlYXZ5LWR1dHkgaW5kdXN0cmlhbCBtYWNoaW5lcnkgYW5kIGVxdWlwbWVudCcgfSxcbiAgICAgICAgeyBuYW1lOiAnU2FmZXR5IEdlYXInLCBkZXNjcmlwdGlvbjogJ1BlcnNvbmFsIHByb3RlY3RpdmUgZXF1aXBtZW50IGFuZCBzYWZldHkgc29sdXRpb25zJyB9LFxuICAgICAgICB7IG5hbWU6ICdNZWFzdXJlbWVudCBUb29scycsIGRlc2NyaXB0aW9uOiAnUHJlY2lzaW9uIG1lYXN1cmVtZW50IGFuZCB0ZXN0aW5nIGluc3RydW1lbnRzJyB9LFxuICAgICAgICB7IG5hbWU6ICdGbHVpZCBDb250cm9sJywgZGVzY3JpcHRpb246ICdWYWx2ZXMsIHB1bXBzLCBhbmQgZmx1aWQgbWFuYWdlbWVudCBzeXN0ZW1zJyB9LFxuICAgICAgICB7IG5hbWU6ICdQb3dlciBTeXN0ZW1zJywgZGVzY3JpcHRpb246ICdQb3dlciBnZW5lcmF0aW9uIGFuZCBlbGVjdHJpY2FsIGVxdWlwbWVudCcgfSxcbiAgICAgICAgeyBuYW1lOiAnQ29uc3RydWN0aW9uIEVxdWlwbWVudCcsIGRlc2NyaXB0aW9uOiAnVG9vbHMgYW5kIGVxdWlwbWVudCBmb3IgY29uc3RydWN0aW9uIHByb2plY3RzJyB9XG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIGRlZmF1bHRDYXRlZ29yaWVzKSB7XG4gICAgICAgIGF3YWl0IGRiLnJ1bihcbiAgICAgICAgICAnSU5TRVJUIElOVE8gY2F0ZWdvcmllcyAobmFtZSwgZGVzY3JpcHRpb24pIFZBTFVFUyAoPywgPyknLFxuICAgICAgICAgIFtjYXRlZ29yeS5uYW1lLCBjYXRlZ29yeS5kZXNjcmlwdGlvbl1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJbXBvcnQgaW5pdGlhbCBwcm9kdWN0cyBkYXRhIGlmIHRhYmxlIGlzIGVtcHR5XG4gICAgY29uc3QgcHJvZHVjdHNDb3VudCA9IGF3YWl0IGRiLmdldCgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gcHJvZHVjdHMnKTtcbiAgICBcbiAgICBpZiAocHJvZHVjdHNDb3VudC5jb3VudCA9PT0gMCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVHJ5IHRvIGxvYWQgcHJvZHVjdHMgZnJvbSBKU09OIGZpbGVcbiAgICAgICAgY29uc3QgZnMgPSBhd2FpdCBpbXBvcnQoJ2ZzJyk7XG4gICAgICAgIGNvbnN0IHBhdGggPSBhd2FpdCBpbXBvcnQoJ3BhdGgnKTtcbiAgICAgICAgY29uc3QgcHJvZHVjdHNKc29uUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnc3JjJywgJ2RhdGEnLCAncHJvZHVjdHMuanNvbicpO1xuICAgICAgICBcbiAgICAgICAgbGV0IHByb2R1Y3RzID0gW107XG4gICAgICAgIFxuICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhwcm9kdWN0c0pzb25QYXRoKSkge1xuICAgICAgICAgIC8vIFJlYWQgSlNPTiBmaWxlXG4gICAgICAgICAgY29uc3QgcHJvZHVjdHNKc29uID0gZnMucmVhZEZpbGVTeW5jKHByb2R1Y3RzSnNvblBhdGgsICd1dGY4Jyk7XG4gICAgICAgICAgcHJvZHVjdHMgPSBKU09OLnBhcnNlKHByb2R1Y3RzSnNvbik7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0xvYWRlZCBwcm9kdWN0cyBmcm9tIEpTT04gZmlsZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIGRlZmF1bHQgcHJvZHVjdFxuICAgICAgICAgIHByb2R1Y3RzID0gW3tcbiAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgbmFtZTogXCJTYW1wbGUgUHJvZHVjdFwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiQSBzYW1wbGUgcHJvZHVjdCBjcmVhdGVkIGF1dG9tYXRpY2FsbHlcIixcbiAgICAgICAgICAgIGltYWdlOiBcImh0dHBzOi8vcGxhY2Vob2xkLmNvLzYwMHg0MDA/dGV4dD1TYW1wbGUrUHJvZHVjdFwiLFxuICAgICAgICAgICAgc3BlY3M6IFtcIlNhbXBsZSBzcGVjaWZpY2F0aW9uIDFcIiwgXCJTYW1wbGUgc3BlY2lmaWNhdGlvbiAyXCJdLFxuICAgICAgICAgICAgdXNlQ2FzZXM6IFtcIlNhbXBsZSB1c2UgY2FzZSAxXCIsIFwiU2FtcGxlIHVzZSBjYXNlIDJcIl0sXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJTYW1wbGUgQ2F0ZWdvcnlcIlxuICAgICAgICAgIH1dO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBkZWZhdWx0IHByb2R1Y3QgYXMgZmFsbGJhY2snKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSW5zZXJ0IHByb2R1Y3RzXG4gICAgICAgIGZvciAoY29uc3QgcHJvZHVjdCBvZiBwcm9kdWN0cykge1xuICAgICAgICAgIGF3YWl0IGRiLnJ1bihcbiAgICAgICAgICAgICdJTlNFUlQgSU5UTyBwcm9kdWN0cyAoaWQsIG5hbWUsIGRlc2NyaXB0aW9uLCBpbWFnZSwgc3BlY3MsIHVzZUNhc2VzLCBjYXRlZ29yeSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/KScsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgIHByb2R1Y3QuaWQsXG4gICAgICAgICAgICAgIHByb2R1Y3QubmFtZSxcbiAgICAgICAgICAgICAgcHJvZHVjdC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgcHJvZHVjdC5pbWFnZSxcbiAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJvZHVjdC5zcGVjcyksXG4gICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHByb2R1Y3QudXNlQ2FzZXMpLFxuICAgICAgICAgICAgICBwcm9kdWN0LmNhdGVnb3J5XG4gICAgICAgICAgICBdXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhgJHtwcm9kdWN0cy5sZW5ndGh9IHByb2R1Y3RzIGluc2VydGVkIGludG8gZGF0YWJhc2VgKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGltcG9ydGluZyBpbml0aWFsIHByb2R1Y3RzOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdG9yZSB0aGUgZGIgaW5zdGFuY2UgaW4gbW9kdWxlIHN0YXRlXG4gICAgZGJJbnN0YW5jZSA9IGRiO1xuICAgIHJldHVybiBkYjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBpbml0aWFsaXphdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gR2V0IGRhdGFiYXNlIGluc3RhbmNlXG5sZXQgZGJJbnN0YW5jZTogREJJbnN0YW5jZSA9IG51bGw7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREQigpIHtcbiAgaWYgKCFpc1NlcnZlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2Ugb3BlcmF0aW9ucyBjYW4gb25seSBiZSBwZXJmb3JtZWQgb24gdGhlIHNlcnZlcicpO1xuICB9XG4gIFxuICBpZiAoIWRiSW5zdGFuY2UpIHtcbiAgICBkYkluc3RhbmNlID0gYXdhaXQgaW5pdGlhbGl6ZURCKCk7XG4gIH1cbiAgcmV0dXJuIGRiSW5zdGFuY2U7XG59XG5cbi8vIENsb3NlIGRhdGFiYXNlIGNvbm5lY3Rpb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbG9zZURCKCkge1xuICBpZiAoIWlzU2VydmVyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBvcGVyYXRpb25zIGNhbiBvbmx5IGJlIHBlcmZvcm1lZCBvbiB0aGUgc2VydmVyJyk7XG4gIH1cbiAgXG4gIGlmIChkYkluc3RhbmNlKSB7XG4gICAgYXdhaXQgZGJJbnN0YW5jZS5jbG9zZSgpO1xuICAgIGRiSW5zdGFuY2UgPSBudWxsO1xuICB9XG59ICJdLCJuYW1lcyI6WyJpc1NlcnZlciIsImluaXRpYWxpemVEQiIsIkVycm9yIiwib3BlbiIsInNxbGl0ZTMiLCJiY3J5cHQiLCJwYXRoIiwidXJsIiwiZnMiLCJfX2ZpbGVuYW1lIiwiZmlsZVVSTFRvUGF0aCIsIl9fZGlybmFtZSIsImRpcm5hbWUiLCJEQl9QQVRIIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJjb25zb2xlIiwibG9nIiwiZGIiLCJmaWxlbmFtZSIsImRyaXZlciIsImRlZmF1bHQiLCJEYXRhYmFzZSIsImV4ZWMiLCJhZG1pblVzZXIiLCJnZXQiLCJoYXNoZWRQYXNzd29yZCIsImhhc2giLCJydW4iLCJjYXRlZ29yaWVzQ291bnQiLCJjb3VudCIsImRlZmF1bHRDYXRlZ29yaWVzIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJwcm9kdWN0c0NvdW50IiwicHJvZHVjdHNKc29uUGF0aCIsInByb2R1Y3RzIiwiZXhpc3RzU3luYyIsInByb2R1Y3RzSnNvbiIsInJlYWRGaWxlU3luYyIsIkpTT04iLCJwYXJzZSIsImlkIiwiaW1hZ2UiLCJzcGVjcyIsInVzZUNhc2VzIiwicHJvZHVjdCIsInN0cmluZ2lmeSIsImxlbmd0aCIsImVycm9yIiwiZGJJbnN0YW5jZSIsImdldERCIiwiY2xvc2VEQiIsImNsb3NlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcategories&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcategories.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();