"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/job-openings";
exports.ids = ["pages/api/job-openings"];
exports.modules = {

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sqlite3":
/*!**************************!*\
  !*** external "sqlite3" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("sqlite3");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "sqlite":
/*!*************************!*\
  !*** external "sqlite" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("sqlite");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjob-openings&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fjob-openings%2Findex.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjob-openings&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fjob-openings%2Findex.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_job_openings_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/job-openings/index.ts */ \"(api)/./pages/api/job-openings/index.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_job_openings_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_job_openings_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/job-openings\",\n        pathname: \"/api/job-openings\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_job_openings_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmpvYi1vcGVuaW5ncyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGam9iLW9wZW5pbmdzJTJGaW5kZXgudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDOEQ7QUFDOUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDZEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw2REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlLXJlYWN0LXR5cGVzY3JpcHQtc3RhcnRlci8/MzE5YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2pvYi1vcGVuaW5ncy9pbmRleC50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2pvYi1vcGVuaW5nc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2pvYi1vcGVuaW5nc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjob-openings&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fjob-openings%2Findex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/job-openings/index.ts":
/*!*****************************************!*\
  !*** ./pages/api/job-openings/index.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _src_lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/lib/db */ \"(api)/./src/lib/db.ts\");\n\nasync function handler(req, res) {\n    try {\n        const db = await (0,_src_lib_db__WEBPACK_IMPORTED_MODULE_0__.getDB)();\n        // GET - Retrieve all job openings\n        if (req.method === \"GET\") {\n            const activeOnly = req.query.active === \"true\";\n            // Log for debugging\n            console.log(\"GET /api/job-openings - activeOnly:\", activeOnly);\n            console.log(\"Query parameters:\", req.query);\n            let query = \"SELECT * FROM job_openings\";\n            if (activeOnly) {\n                query += \" WHERE active = 1\";\n            }\n            query += \" ORDER BY created_at DESC\";\n            console.log(\"Executing SQL:\", query);\n            try {\n                const jobs = await db.all(query);\n                // Log the results for debugging\n                console.log(`Found ${jobs.length} job openings:`, jobs);\n                return res.status(200).json(jobs);\n            } catch (dbError) {\n                console.error(\"Database query error:\", dbError);\n                return res.status(500).json({\n                    message: \"Database query failed\",\n                    error: dbError.message\n                });\n            }\n        }\n        // POST - Create a new job opening (protected route)\n        if (req.method === \"POST\") {\n            // Check for auth token here (reusing the auth middleware pattern)\n            const authHeader = req.headers.authorization;\n            if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n                return res.status(401).json({\n                    message: \"Unauthorized\"\n                });\n            }\n            const { title, department, location, type, description } = req.body;\n            if (!title || !location || !type || !description) {\n                return res.status(400).json({\n                    message: \"Required fields are missing\"\n                });\n            }\n            // Include the active status, default to true if not provided\n            const active = req.body.active !== undefined ? req.body.active : true;\n            const result = await db.run(\"INSERT INTO job_openings (title, department, location, type, description, active) VALUES (?, ?, ?, ?, ?, ?)\", [\n                title,\n                department || \"general\",\n                location,\n                type,\n                description,\n                active ? 1 : 0\n            ]);\n            return res.status(201).json({\n                id: result.lastID,\n                message: \"Job opening created successfully\"\n            });\n        }\n        // PUT - Update a job opening (protected route)\n        if (req.method === \"PUT\") {\n            // Check for auth token here\n            const authHeader = req.headers.authorization;\n            if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n                return res.status(401).json({\n                    message: \"Unauthorized\"\n                });\n            }\n            const { id, title, department, location, type, description, active } = req.body;\n            if (!id || !title || !location || !type || !description) {\n                return res.status(400).json({\n                    message: \"Required fields are missing\"\n                });\n            }\n            // Convert active to integer for SQLite\n            const activeValue = active ? 1 : 0;\n            console.log(\"Updating job opening:\", {\n                id,\n                title,\n                department,\n                location,\n                type,\n                description,\n                active,\n                activeValue\n            });\n            await db.run(\"UPDATE job_openings SET title = ?, department = ?, location = ?, type = ?, description = ?, active = ? WHERE id = ?\", [\n                title,\n                department || \"general\",\n                location,\n                type,\n                description,\n                activeValue,\n                id\n            ]);\n            return res.status(200).json({\n                message: \"Job opening updated successfully\"\n            });\n        }\n        // DELETE - Remove a job opening (protected route)\n        if (req.method === \"DELETE\") {\n            // Check for auth token here\n            const authHeader = req.headers.authorization;\n            if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n                return res.status(401).json({\n                    message: \"Unauthorized\"\n                });\n            }\n            const { id } = req.query;\n            if (!id) {\n                return res.status(400).json({\n                    message: \"Job opening ID is required\"\n                });\n            }\n            await db.run(\"DELETE FROM job_openings WHERE id = ?\", [\n                id\n            ]);\n            return res.status(200).json({\n                message: \"Job opening deleted successfully\"\n            });\n        }\n        // Method not allowed\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    } catch (error) {\n        console.error(\"Error handling job openings:\", error);\n        return res.status(500).json({\n            message: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFRyxTQUFTO1lBQW1DO1FBQzVFO1FBRUEscUJBQXFCO1FBQ3JCLE9BQU9mLElBQUlXLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUcsU0FBUztRQUFxQjtJQUM5RCxFQUFFLE9BQU9ELE9BQU87UUFDZFIsUUFBUVEsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsT0FBT2QsSUFBSVcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFRyxTQUFTO1FBQXdCO0lBQ2pFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlLXJlYWN0LXR5cGVzY3JpcHQtc3RhcnRlci8uL3BhZ2VzL2FwaS9qb2Itb3BlbmluZ3MvaW5kZXgudHM/OWI3MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBnZXREQiB9IGZyb20gJy4uLy4uLy4uL3NyYy9saWIvZGInO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREQigpO1xuICAgIFxuICAgIC8vIEdFVCAtIFJldHJpZXZlIGFsbCBqb2Igb3BlbmluZ3NcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgIGNvbnN0IGFjdGl2ZU9ubHkgPSByZXEucXVlcnkuYWN0aXZlID09PSAndHJ1ZSc7XG4gICAgICBcbiAgICAgIC8vIExvZyBmb3IgZGVidWdnaW5nXG4gICAgICBjb25zb2xlLmxvZygnR0VUIC9hcGkvam9iLW9wZW5pbmdzIC0gYWN0aXZlT25seTonLCBhY3RpdmVPbmx5KTtcbiAgICAgIGNvbnNvbGUubG9nKCdRdWVyeSBwYXJhbWV0ZXJzOicsIHJlcS5xdWVyeSk7XG4gICAgICBcbiAgICAgIGxldCBxdWVyeSA9ICdTRUxFQ1QgKiBGUk9NIGpvYl9vcGVuaW5ncyc7XG4gICAgICBpZiAoYWN0aXZlT25seSkge1xuICAgICAgICBxdWVyeSArPSAnIFdIRVJFIGFjdGl2ZSA9IDEnO1xuICAgICAgfVxuICAgICAgcXVlcnkgKz0gJyBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0MnO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnRXhlY3V0aW5nIFNRTDonLCBxdWVyeSk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGpvYnMgPSBhd2FpdCBkYi5hbGwocXVlcnkpO1xuICAgICAgICBcbiAgICAgICAgLy8gTG9nIHRoZSByZXN1bHRzIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgY29uc29sZS5sb2coYEZvdW5kICR7am9icy5sZW5ndGh9IGpvYiBvcGVuaW5nczpgLCBqb2JzKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihqb2JzKTtcbiAgICAgIH0gY2F0Y2ggKGRiRXJyb3I6IGFueSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBxdWVyeSBlcnJvcjonLCBkYkVycm9yKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0RhdGFiYXNlIHF1ZXJ5IGZhaWxlZCcsIGVycm9yOiBkYkVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFBPU1QgLSBDcmVhdGUgYSBuZXcgam9iIG9wZW5pbmcgKHByb3RlY3RlZCByb3V0ZSlcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICAvLyBDaGVjayBmb3IgYXV0aCB0b2tlbiBoZXJlIChyZXVzaW5nIHRoZSBhdXRoIG1pZGRsZXdhcmUgcGF0dGVybilcbiAgICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xuICAgICAgaWYgKCFhdXRoSGVhZGVyIHx8ICFhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgeyB0aXRsZSwgZGVwYXJ0bWVudCwgbG9jYXRpb24sIHR5cGUsIGRlc2NyaXB0aW9uIH0gPSByZXEuYm9keTtcbiAgICAgIFxuICAgICAgaWYgKCF0aXRsZSB8fCAhbG9jYXRpb24gfHwgIXR5cGUgfHwgIWRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdSZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcnIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJbmNsdWRlIHRoZSBhY3RpdmUgc3RhdHVzLCBkZWZhdWx0IHRvIHRydWUgaWYgbm90IHByb3ZpZGVkXG4gICAgICBjb25zdCBhY3RpdmUgPSByZXEuYm9keS5hY3RpdmUgIT09IHVuZGVmaW5lZCA/IHJlcS5ib2R5LmFjdGl2ZSA6IHRydWU7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLnJ1bihcbiAgICAgICAgJ0lOU0VSVCBJTlRPIGpvYl9vcGVuaW5ncyAodGl0bGUsIGRlcGFydG1lbnQsIGxvY2F0aW9uLCB0eXBlLCBkZXNjcmlwdGlvbiwgYWN0aXZlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8pJyxcbiAgICAgICAgW3RpdGxlLCBkZXBhcnRtZW50IHx8ICdnZW5lcmFsJywgbG9jYXRpb24sIHR5cGUsIGRlc2NyaXB0aW9uLCBhY3RpdmUgPyAxIDogMF1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7IFxuICAgICAgICBpZDogcmVzdWx0Lmxhc3RJRCxcbiAgICAgICAgbWVzc2FnZTogJ0pvYiBvcGVuaW5nIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyBcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBQVVQgLSBVcGRhdGUgYSBqb2Igb3BlbmluZyAocHJvdGVjdGVkIHJvdXRlKVxuICAgIGlmIChyZXEubWV0aG9kID09PSAnUFVUJykge1xuICAgICAgLy8gQ2hlY2sgZm9yIGF1dGggdG9rZW4gaGVyZVxuICAgICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb247XG4gICAgICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB7IGlkLCB0aXRsZSwgZGVwYXJ0bWVudCwgbG9jYXRpb24sIHR5cGUsIGRlc2NyaXB0aW9uLCBhY3RpdmUgfSA9IHJlcS5ib2R5O1xuICAgICAgXG4gICAgICBpZiAoIWlkIHx8ICF0aXRsZSB8fCAhbG9jYXRpb24gfHwgIXR5cGUgfHwgIWRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdSZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcnIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDb252ZXJ0IGFjdGl2ZSB0byBpbnRlZ2VyIGZvciBTUUxpdGVcbiAgICAgIGNvbnN0IGFjdGl2ZVZhbHVlID0gYWN0aXZlID8gMSA6IDA7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGluZyBqb2Igb3BlbmluZzonLCB7IGlkLCB0aXRsZSwgZGVwYXJ0bWVudCwgbG9jYXRpb24sIHR5cGUsIGRlc2NyaXB0aW9uLCBhY3RpdmUsIGFjdGl2ZVZhbHVlIH0pO1xuICAgICAgXG4gICAgICBhd2FpdCBkYi5ydW4oXG4gICAgICAgICdVUERBVEUgam9iX29wZW5pbmdzIFNFVCB0aXRsZSA9ID8sIGRlcGFydG1lbnQgPSA/LCBsb2NhdGlvbiA9ID8sIHR5cGUgPSA/LCBkZXNjcmlwdGlvbiA9ID8sIGFjdGl2ZSA9ID8gV0hFUkUgaWQgPSA/JyxcbiAgICAgICAgW3RpdGxlLCBkZXBhcnRtZW50IHx8ICdnZW5lcmFsJywgbG9jYXRpb24sIHR5cGUsIGRlc2NyaXB0aW9uLCBhY3RpdmVWYWx1ZSwgaWRdXG4gICAgICApO1xuICAgICAgXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnSm9iIG9wZW5pbmcgdXBkYXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBERUxFVEUgLSBSZW1vdmUgYSBqb2Igb3BlbmluZyAocHJvdGVjdGVkIHJvdXRlKVxuICAgIGlmIChyZXEubWV0aG9kID09PSAnREVMRVRFJykge1xuICAgICAgLy8gQ2hlY2sgZm9yIGF1dGggdG9rZW4gaGVyZVxuICAgICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb247XG4gICAgICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucXVlcnk7XG4gICAgICBcbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0pvYiBvcGVuaW5nIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgYXdhaXQgZGIucnVuKCdERUxFVEUgRlJPTSBqb2Jfb3BlbmluZ3MgV0hFUkUgaWQgPSA/JywgW2lkXSk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdKb2Igb3BlbmluZyBkZWxldGVkIHN1Y2Nlc3NmdWxseScgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIE1ldGhvZCBub3QgYWxsb3dlZFxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGhhbmRsaW5nIGpvYiBvcGVuaW5nczonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbImdldERCIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImRiIiwibWV0aG9kIiwiYWN0aXZlT25seSIsInF1ZXJ5IiwiYWN0aXZlIiwiY29uc29sZSIsImxvZyIsImpvYnMiLCJhbGwiLCJsZW5ndGgiLCJzdGF0dXMiLCJqc29uIiwiZGJFcnJvciIsImVycm9yIiwibWVzc2FnZSIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInN0YXJ0c1dpdGgiLCJ0aXRsZSIsImRlcGFydG1lbnQiLCJsb2NhdGlvbiIsInR5cGUiLCJkZXNjcmlwdGlvbiIsImJvZHkiLCJ1bmRlZmluZWQiLCJyZXN1bHQiLCJydW4iLCJpZCIsImxhc3RJRCIsImFjdGl2ZVZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/job-openings/index.ts\n");

/***/ }),

/***/ "(api)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closeDB: () => (/* binding */ closeDB),\n/* harmony export */   getDB: () => (/* binding */ getDB),\n/* harmony export */   initializeDB: () => (/* binding */ initializeDB)\n/* harmony export */ });\n// Check if we're running on the server to avoid errors in the browser\nconst isServer = \"undefined\" === \"undefined\";\n// Initialize database\nasync function initializeDB() {\n    if (!isServer) {\n        throw new Error(\"Database operations can only be performed on the server\");\n    }\n    try {\n        // Dynamic imports to avoid issues with client-side code\n        const { open } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! sqlite */ \"sqlite\"));\n        const sqlite3 = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! sqlite3 */ \"sqlite3\", 23));\n        const bcrypt = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! bcryptjs */ \"bcryptjs\", 23));\n        const path = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! path */ \"path\", 23));\n        const url = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! url */ \"url\", 23));\n        const fs = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs */ \"fs\", 23));\n        // Setup paths\n        const __filename = url.fileURLToPath(\"file:///home/home/project-main-1/src/lib/db.ts\");\n        const __dirname = path.dirname(__filename);\n        const DB_PATH = path.join(process.cwd(), \"data.db\");\n        console.log(\"Initializing database at:\", DB_PATH);\n        const db = await open({\n            filename: DB_PATH,\n            driver: sqlite3.default.Database\n        });\n        console.log(\"Connected to database\");\n        // Create tables if they don't exist\n        await db.exec(`\n      CREATE TABLE IF NOT EXISTS users (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        username TEXT UNIQUE NOT NULL,\n        password TEXT NOT NULL,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      );\n\n      CREATE TABLE IF NOT EXISTS categories (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        name TEXT UNIQUE NOT NULL,\n        description TEXT,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      );\n\n      CREATE TABLE IF NOT EXISTS products (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        name TEXT NOT NULL,\n        description TEXT,\n        image TEXT,\n        specs TEXT,\n        useCases TEXT,\n        category TEXT,\n        images TEXT,\n        document TEXT,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        FOREIGN KEY (category) REFERENCES categories(name)\n      );\n      \n      CREATE TABLE IF NOT EXISTS job_openings (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        title TEXT NOT NULL,\n        department TEXT NOT NULL,\n        location TEXT NOT NULL,\n        type TEXT NOT NULL,\n        description TEXT NOT NULL,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        active INTEGER DEFAULT 1\n      );\n    `);\n        console.log(\"Database tables created\");\n        // Alter existing products table to add document column if it doesn't exist\n        try {\n            // Check if the document column exists\n            const tableInfo = await db.all(\"PRAGMA table_info(products)\");\n            const documentColumnExists = tableInfo.some((column)=>column.name === \"document\");\n            if (!documentColumnExists) {\n                // Add document column to products table\n                await db.exec(\"ALTER TABLE products ADD COLUMN document TEXT\");\n                console.log(\"Added document column to products table\");\n            }\n        } catch (error) {\n            console.error(\"Error altering products table:\", error);\n        }\n        // Check if admin user exists, if not create it\n        const adminUser = await db.get(\"SELECT * FROM users WHERE username = ?\", [\n            \"admin\"\n        ]);\n        if (!adminUser) {\n            const hashedPassword = await bcrypt.hash(\"Azerbaycan123\", 10);\n            await db.run(\"INSERT INTO users (username, password) VALUES (?, ?)\", [\n                \"admin\",\n                hashedPassword\n            ]);\n            console.log(\"Admin user created\");\n        }\n        // Initialize default categories if none exist\n        const categoriesCount = await db.get(\"SELECT COUNT(*) as count FROM categories\");\n        if (categoriesCount.count === 0) {\n            const defaultCategories = [\n                {\n                    name: \"Industrial Equipment\",\n                    description: \"Heavy-duty industrial machinery and equipment\"\n                },\n                {\n                    name: \"Safety Gear\",\n                    description: \"Personal protective equipment and safety solutions\"\n                },\n                {\n                    name: \"Measurement Tools\",\n                    description: \"Precision measurement and testing instruments\"\n                },\n                {\n                    name: \"Fluid Control\",\n                    description: \"Valves, pumps, and fluid management systems\"\n                },\n                {\n                    name: \"Power Systems\",\n                    description: \"Power generation and electrical equipment\"\n                },\n                {\n                    name: \"Construction Equipment\",\n                    description: \"Tools and equipment for construction projects\"\n                }\n            ];\n            for (const category of defaultCategories){\n                await db.run(\"INSERT INTO categories (name, description) VALUES (?, ?)\", [\n                    category.name,\n                    category.description\n                ]);\n            }\n        }\n        // Import initial products data if table is empty\n        const productsCount = await db.get(\"SELECT COUNT(*) as count FROM products\");\n        if (productsCount.count === 0) {\n            try {\n                // Try to load products from JSON file\n                const fs = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs */ \"fs\", 23));\n                const path = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! path */ \"path\", 23));\n                const productsJsonPath = path.join(process.cwd(), \"src\", \"data\", \"products.json\");\n                let products = [];\n                if (fs.existsSync(productsJsonPath)) {\n                    // Read JSON file\n                    const productsJson = fs.readFileSync(productsJsonPath, \"utf8\");\n                    products = JSON.parse(productsJson);\n                    console.log(\"Loaded products from JSON file\");\n                } else {\n                    // Fallback to default product\n                    products = [\n                        {\n                            id: 1,\n                            name: \"Sample Product\",\n                            description: \"A sample product created automatically\",\n                            image: \"https://placehold.co/600x400?text=Sample+Product\",\n                            specs: [\n                                \"Sample specification 1\",\n                                \"Sample specification 2\"\n                            ],\n                            useCases: [\n                                \"Sample use case 1\",\n                                \"Sample use case 2\"\n                            ],\n                            category: \"Sample Category\"\n                        }\n                    ];\n                    console.log(\"Using default product as fallback\");\n                }\n                // Insert products\n                for (const product of products){\n                    await db.run(\"INSERT INTO products (id, name, description, image, specs, useCases, category) VALUES (?, ?, ?, ?, ?, ?, ?)\", [\n                        product.id,\n                        product.name,\n                        product.description,\n                        product.image,\n                        JSON.stringify(product.specs),\n                        JSON.stringify(product.useCases),\n                        product.category\n                    ]);\n                }\n                console.log(`${products.length} products inserted into database`);\n            } catch (error) {\n                console.error(\"Error importing initial products:\", error);\n            }\n        }\n        // Initialize default job openings if none exist\n        const jobOpeningsCount = await db.get(\"SELECT COUNT(*) as count FROM job_openings\");\n        if (jobOpeningsCount.count === 0) {\n            const defaultJobs = [\n                {\n                    title: \"Supply Chain Manager\",\n                    department: \"operations\",\n                    location: \"Baku, Azerbaijan\",\n                    type: \"Full-time\",\n                    description: \"Leading and optimizing supply chain operations...\"\n                },\n                {\n                    title: \"Sales Representative\",\n                    department: \"sales\",\n                    location: \"Baku, Azerbaijan\",\n                    type: \"Full-time\",\n                    description: \"Developing and maintaining client relationships...\"\n                },\n                {\n                    title: \"Logistics Coordinator\",\n                    department: \"logistics\",\n                    location: \"Baku, Azerbaijan\",\n                    type: \"Full-time\",\n                    description: \"Coordinating shipment schedules and delivery routes...\"\n                }\n            ];\n            for (const job of defaultJobs){\n                await db.run(\"INSERT INTO job_openings (title, department, location, type, description) VALUES (?, ?, ?, ?, ?)\", [\n                    job.title,\n                    job.department,\n                    job.location,\n                    job.type,\n                    job.description\n                ]);\n            }\n            console.log(\"Default job openings created\");\n        }\n        // Store the db instance in module state\n        dbInstance = db;\n        return db;\n    } catch (error) {\n        console.error(\"Database initialization error:\", error);\n        throw error;\n    }\n}\n// Get database instance\nlet dbInstance = null;\nasync function getDB() {\n    if (!isServer) {\n        throw new Error(\"Database operations can only be performed on the server\");\n    }\n    if (!dbInstance) {\n        dbInstance = await initializeDB();\n    }\n    return dbInstance;\n}\n// Close database connection\nasync function closeDB() {\n    if (!isServer) {\n        throw new Error(\"Database operations can only be performed on the server\");\n    }\n    if (dbInstance) {\n        await dbInstance.close();\n        dbInstance = null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2xFLFVBQVU7UUFDYixNQUFNLElBQUlFLE1BQU07SUFDbEI7SUFFQSxJQUFJOEQsWUFBWTtRQUNkLE1BQU1BLFdBQVdHLEtBQUs7UUFDdEJILGFBQWE7SUFDZjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZS1yZWFjdC10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ2hlY2sgaWYgd2UncmUgcnVubmluZyBvbiB0aGUgc2VydmVyIHRvIGF2b2lkIGVycm9ycyBpbiB0aGUgYnJvd3NlclxuY29uc3QgaXNTZXJ2ZXIgPSB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJztcblxuLy8gVHlwZSBmb3IgZGF0YWJhc2UgaW5zdGFuY2VcbnR5cGUgREJJbnN0YW5jZSA9IGFueTtcblxuLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVEQigpIHtcbiAgaWYgKCFpc1NlcnZlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2Ugb3BlcmF0aW9ucyBjYW4gb25seSBiZSBwZXJmb3JtZWQgb24gdGhlIHNlcnZlcicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBEeW5hbWljIGltcG9ydHMgdG8gYXZvaWQgaXNzdWVzIHdpdGggY2xpZW50LXNpZGUgY29kZVxuICAgIGNvbnN0IHsgb3BlbiB9ID0gYXdhaXQgaW1wb3J0KCdzcWxpdGUnKTtcbiAgICBjb25zdCBzcWxpdGUzID0gYXdhaXQgaW1wb3J0KCdzcWxpdGUzJyk7XG4gICAgY29uc3QgYmNyeXB0ID0gYXdhaXQgaW1wb3J0KCdiY3J5cHRqcycpO1xuICAgIGNvbnN0IHBhdGggPSBhd2FpdCBpbXBvcnQoJ3BhdGgnKTtcbiAgICBjb25zdCB1cmwgPSBhd2FpdCBpbXBvcnQoJ3VybCcpO1xuICAgIGNvbnN0IGZzID0gYXdhaXQgaW1wb3J0KCdmcycpO1xuXG4gICAgLy8gU2V0dXAgcGF0aHNcbiAgICBjb25zdCBfX2ZpbGVuYW1lID0gdXJsLmZpbGVVUkxUb1BhdGgoaW1wb3J0Lm1ldGEudXJsKTtcbiAgICBjb25zdCBfX2Rpcm5hbWUgPSBwYXRoLmRpcm5hbWUoX19maWxlbmFtZSk7XG4gICAgY29uc3QgREJfUEFUSCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnZGF0YS5kYicpO1xuXG4gICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBkYXRhYmFzZSBhdDonLCBEQl9QQVRIKTtcbiAgICBcbiAgICBjb25zdCBkYiA9IGF3YWl0IG9wZW4oe1xuICAgICAgZmlsZW5hbWU6IERCX1BBVEgsXG4gICAgICBkcml2ZXI6IHNxbGl0ZTMuZGVmYXVsdC5EYXRhYmFzZVxuICAgIH0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdDb25uZWN0ZWQgdG8gZGF0YWJhc2UnKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgdGFibGVzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcbiAgICBhd2FpdCBkYi5leGVjKGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHVzZXJzIChcbiAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgICB1c2VybmFtZSBURVhUIFVOSVFVRSBOT1QgTlVMTCxcbiAgICAgICAgcGFzc3dvcmQgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgICApO1xuXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBjYXRlZ29yaWVzIChcbiAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgICBuYW1lIFRFWFQgVU5JUVVFIE5PVCBOVUxMLFxuICAgICAgICBkZXNjcmlwdGlvbiBURVhULFxuICAgICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgICk7XG5cbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHByb2R1Y3RzIChcbiAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgICBuYW1lIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgIGRlc2NyaXB0aW9uIFRFWFQsXG4gICAgICAgIGltYWdlIFRFWFQsXG4gICAgICAgIHNwZWNzIFRFWFQsXG4gICAgICAgIHVzZUNhc2VzIFRFWFQsXG4gICAgICAgIGNhdGVnb3J5IFRFWFQsXG4gICAgICAgIGltYWdlcyBURVhULFxuICAgICAgICBkb2N1bWVudCBURVhULFxuICAgICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIEZPUkVJR04gS0VZIChjYXRlZ29yeSkgUkVGRVJFTkNFUyBjYXRlZ29yaWVzKG5hbWUpXG4gICAgICApO1xuICAgICAgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBqb2Jfb3BlbmluZ3MgKFxuICAgICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgICAgIHRpdGxlIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgIGRlcGFydG1lbnQgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgbG9jYXRpb24gVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgdHlwZSBURVhUIE5PVCBOVUxMLFxuICAgICAgICBkZXNjcmlwdGlvbiBURVhUIE5PVCBOVUxMLFxuICAgICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIGFjdGl2ZSBJTlRFR0VSIERFRkFVTFQgMVxuICAgICAgKTtcbiAgICBgKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgdGFibGVzIGNyZWF0ZWQnKTtcblxuICAgIC8vIEFsdGVyIGV4aXN0aW5nIHByb2R1Y3RzIHRhYmxlIHRvIGFkZCBkb2N1bWVudCBjb2x1bW4gaWYgaXQgZG9lc24ndCBleGlzdFxuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiB0aGUgZG9jdW1lbnQgY29sdW1uIGV4aXN0c1xuICAgICAgY29uc3QgdGFibGVJbmZvID0gYXdhaXQgZGIuYWxsKCdQUkFHTUEgdGFibGVfaW5mbyhwcm9kdWN0cyknKTtcbiAgICAgIGNvbnN0IGRvY3VtZW50Q29sdW1uRXhpc3RzID0gdGFibGVJbmZvLnNvbWUoKGNvbHVtbjogYW55KSA9PiBjb2x1bW4ubmFtZSA9PT0gJ2RvY3VtZW50Jyk7XG4gICAgICBcbiAgICAgIGlmICghZG9jdW1lbnRDb2x1bW5FeGlzdHMpIHtcbiAgICAgICAgLy8gQWRkIGRvY3VtZW50IGNvbHVtbiB0byBwcm9kdWN0cyB0YWJsZVxuICAgICAgICBhd2FpdCBkYi5leGVjKCdBTFRFUiBUQUJMRSBwcm9kdWN0cyBBREQgQ09MVU1OIGRvY3VtZW50IFRFWFQnKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0FkZGVkIGRvY3VtZW50IGNvbHVtbiB0byBwcm9kdWN0cyB0YWJsZScpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbHRlcmluZyBwcm9kdWN0cyB0YWJsZTonLCBlcnJvcik7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgYWRtaW4gdXNlciBleGlzdHMsIGlmIG5vdCBjcmVhdGUgaXRcbiAgICBjb25zdCBhZG1pblVzZXIgPSBhd2FpdCBkYi5nZXQoJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/JywgWydhZG1pbiddKTtcbiAgICBcbiAgICBpZiAoIWFkbWluVXNlcikge1xuICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCgnQXplcmJheWNhbjEyMycsIDEwKTtcbiAgICAgIGF3YWl0IGRiLnJ1bihcbiAgICAgICAgJ0lOU0VSVCBJTlRPIHVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQpIFZBTFVFUyAoPywgPyknLFxuICAgICAgICBbJ2FkbWluJywgaGFzaGVkUGFzc3dvcmRdXG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coJ0FkbWluIHVzZXIgY3JlYXRlZCcpO1xuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemUgZGVmYXVsdCBjYXRlZ29yaWVzIGlmIG5vbmUgZXhpc3RcbiAgICBjb25zdCBjYXRlZ29yaWVzQ291bnQgPSBhd2FpdCBkYi5nZXQoJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIGNhdGVnb3JpZXMnKTtcbiAgICBpZiAoY2F0ZWdvcmllc0NvdW50LmNvdW50ID09PSAwKSB7XG4gICAgICBjb25zdCBkZWZhdWx0Q2F0ZWdvcmllcyA9IFtcbiAgICAgICAgeyBuYW1lOiAnSW5kdXN0cmlhbCBFcXVpcG1lbnQnLCBkZXNjcmlwdGlvbjogJ0hlYXZ5LWR1dHkgaW5kdXN0cmlhbCBtYWNoaW5lcnkgYW5kIGVxdWlwbWVudCcgfSxcbiAgICAgICAgeyBuYW1lOiAnU2FmZXR5IEdlYXInLCBkZXNjcmlwdGlvbjogJ1BlcnNvbmFsIHByb3RlY3RpdmUgZXF1aXBtZW50IGFuZCBzYWZldHkgc29sdXRpb25zJyB9LFxuICAgICAgICB7IG5hbWU6ICdNZWFzdXJlbWVudCBUb29scycsIGRlc2NyaXB0aW9uOiAnUHJlY2lzaW9uIG1lYXN1cmVtZW50IGFuZCB0ZXN0aW5nIGluc3RydW1lbnRzJyB9LFxuICAgICAgICB7IG5hbWU6ICdGbHVpZCBDb250cm9sJywgZGVzY3JpcHRpb246ICdWYWx2ZXMsIHB1bXBzLCBhbmQgZmx1aWQgbWFuYWdlbWVudCBzeXN0ZW1zJyB9LFxuICAgICAgICB7IG5hbWU6ICdQb3dlciBTeXN0ZW1zJywgZGVzY3JpcHRpb246ICdQb3dlciBnZW5lcmF0aW9uIGFuZCBlbGVjdHJpY2FsIGVxdWlwbWVudCcgfSxcbiAgICAgICAgeyBuYW1lOiAnQ29uc3RydWN0aW9uIEVxdWlwbWVudCcsIGRlc2NyaXB0aW9uOiAnVG9vbHMgYW5kIGVxdWlwbWVudCBmb3IgY29uc3RydWN0aW9uIHByb2plY3RzJyB9XG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIGRlZmF1bHRDYXRlZ29yaWVzKSB7XG4gICAgICAgIGF3YWl0IGRiLnJ1bihcbiAgICAgICAgICAnSU5TRVJUIElOVE8gY2F0ZWdvcmllcyAobmFtZSwgZGVzY3JpcHRpb24pIFZBTFVFUyAoPywgPyknLFxuICAgICAgICAgIFtjYXRlZ29yeS5uYW1lLCBjYXRlZ29yeS5kZXNjcmlwdGlvbl1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJbXBvcnQgaW5pdGlhbCBwcm9kdWN0cyBkYXRhIGlmIHRhYmxlIGlzIGVtcHR5XG4gICAgY29uc3QgcHJvZHVjdHNDb3VudCA9IGF3YWl0IGRiLmdldCgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gcHJvZHVjdHMnKTtcbiAgICBcbiAgICBpZiAocHJvZHVjdHNDb3VudC5jb3VudCA9PT0gMCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVHJ5IHRvIGxvYWQgcHJvZHVjdHMgZnJvbSBKU09OIGZpbGVcbiAgICAgICAgY29uc3QgZnMgPSBhd2FpdCBpbXBvcnQoJ2ZzJyk7XG4gICAgICAgIGNvbnN0IHBhdGggPSBhd2FpdCBpbXBvcnQoJ3BhdGgnKTtcbiAgICAgICAgY29uc3QgcHJvZHVjdHNKc29uUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnc3JjJywgJ2RhdGEnLCAncHJvZHVjdHMuanNvbicpO1xuICAgICAgICBcbiAgICAgICAgbGV0IHByb2R1Y3RzID0gW107XG4gICAgICAgIFxuICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhwcm9kdWN0c0pzb25QYXRoKSkge1xuICAgICAgICAgIC8vIFJlYWQgSlNPTiBmaWxlXG4gICAgICAgICAgY29uc3QgcHJvZHVjdHNKc29uID0gZnMucmVhZEZpbGVTeW5jKHByb2R1Y3RzSnNvblBhdGgsICd1dGY4Jyk7XG4gICAgICAgICAgcHJvZHVjdHMgPSBKU09OLnBhcnNlKHByb2R1Y3RzSnNvbik7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0xvYWRlZCBwcm9kdWN0cyBmcm9tIEpTT04gZmlsZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIGRlZmF1bHQgcHJvZHVjdFxuICAgICAgICAgIHByb2R1Y3RzID0gW3tcbiAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgbmFtZTogXCJTYW1wbGUgUHJvZHVjdFwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiQSBzYW1wbGUgcHJvZHVjdCBjcmVhdGVkIGF1dG9tYXRpY2FsbHlcIixcbiAgICAgICAgICAgIGltYWdlOiBcImh0dHBzOi8vcGxhY2Vob2xkLmNvLzYwMHg0MDA/dGV4dD1TYW1wbGUrUHJvZHVjdFwiLFxuICAgICAgICAgICAgc3BlY3M6IFtcIlNhbXBsZSBzcGVjaWZpY2F0aW9uIDFcIiwgXCJTYW1wbGUgc3BlY2lmaWNhdGlvbiAyXCJdLFxuICAgICAgICAgICAgdXNlQ2FzZXM6IFtcIlNhbXBsZSB1c2UgY2FzZSAxXCIsIFwiU2FtcGxlIHVzZSBjYXNlIDJcIl0sXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJTYW1wbGUgQ2F0ZWdvcnlcIlxuICAgICAgICAgIH1dO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBkZWZhdWx0IHByb2R1Y3QgYXMgZmFsbGJhY2snKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSW5zZXJ0IHByb2R1Y3RzXG4gICAgICAgIGZvciAoY29uc3QgcHJvZHVjdCBvZiBwcm9kdWN0cykge1xuICAgICAgICAgIGF3YWl0IGRiLnJ1bihcbiAgICAgICAgICAgICdJTlNFUlQgSU5UTyBwcm9kdWN0cyAoaWQsIG5hbWUsIGRlc2NyaXB0aW9uLCBpbWFnZSwgc3BlY3MsIHVzZUNhc2VzLCBjYXRlZ29yeSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/KScsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgIHByb2R1Y3QuaWQsXG4gICAgICAgICAgICAgIHByb2R1Y3QubmFtZSxcbiAgICAgICAgICAgICAgcHJvZHVjdC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgcHJvZHVjdC5pbWFnZSxcbiAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJvZHVjdC5zcGVjcyksXG4gICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHByb2R1Y3QudXNlQ2FzZXMpLFxuICAgICAgICAgICAgICBwcm9kdWN0LmNhdGVnb3J5XG4gICAgICAgICAgICBdXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhgJHtwcm9kdWN0cy5sZW5ndGh9IHByb2R1Y3RzIGluc2VydGVkIGludG8gZGF0YWJhc2VgKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGltcG9ydGluZyBpbml0aWFsIHByb2R1Y3RzOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIGRlZmF1bHQgam9iIG9wZW5pbmdzIGlmIG5vbmUgZXhpc3RcbiAgICBjb25zdCBqb2JPcGVuaW5nc0NvdW50ID0gYXdhaXQgZGIuZ2V0KCdTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBqb2Jfb3BlbmluZ3MnKTtcbiAgICBpZiAoam9iT3BlbmluZ3NDb3VudC5jb3VudCA9PT0gMCkge1xuICAgICAgY29uc3QgZGVmYXVsdEpvYnMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogXCJTdXBwbHkgQ2hhaW4gTWFuYWdlclwiLFxuICAgICAgICAgIGRlcGFydG1lbnQ6IFwib3BlcmF0aW9uc1wiLFxuICAgICAgICAgIGxvY2F0aW9uOiBcIkJha3UsIEF6ZXJiYWlqYW5cIixcbiAgICAgICAgICB0eXBlOiBcIkZ1bGwtdGltZVwiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkxlYWRpbmcgYW5kIG9wdGltaXppbmcgc3VwcGx5IGNoYWluIG9wZXJhdGlvbnMuLi5cIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IFwiU2FsZXMgUmVwcmVzZW50YXRpdmVcIixcbiAgICAgICAgICBkZXBhcnRtZW50OiBcInNhbGVzXCIsXG4gICAgICAgICAgbG9jYXRpb246IFwiQmFrdSwgQXplcmJhaWphblwiLFxuICAgICAgICAgIHR5cGU6IFwiRnVsbC10aW1lXCIsXG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiRGV2ZWxvcGluZyBhbmQgbWFpbnRhaW5pbmcgY2xpZW50IHJlbGF0aW9uc2hpcHMuLi5cIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IFwiTG9naXN0aWNzIENvb3JkaW5hdG9yXCIsXG4gICAgICAgICAgZGVwYXJ0bWVudDogXCJsb2dpc3RpY3NcIixcbiAgICAgICAgICBsb2NhdGlvbjogXCJCYWt1LCBBemVyYmFpamFuXCIsXG4gICAgICAgICAgdHlwZTogXCJGdWxsLXRpbWVcIixcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJDb29yZGluYXRpbmcgc2hpcG1lbnQgc2NoZWR1bGVzIGFuZCBkZWxpdmVyeSByb3V0ZXMuLi5cIlxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IGpvYiBvZiBkZWZhdWx0Sm9icykge1xuICAgICAgICBhd2FpdCBkYi5ydW4oXG4gICAgICAgICAgJ0lOU0VSVCBJTlRPIGpvYl9vcGVuaW5ncyAodGl0bGUsIGRlcGFydG1lbnQsIGxvY2F0aW9uLCB0eXBlLCBkZXNjcmlwdGlvbikgVkFMVUVTICg/LCA/LCA/LCA/LCA/KScsXG4gICAgICAgICAgW2pvYi50aXRsZSwgam9iLmRlcGFydG1lbnQsIGpvYi5sb2NhdGlvbiwgam9iLnR5cGUsIGpvYi5kZXNjcmlwdGlvbl1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKCdEZWZhdWx0IGpvYiBvcGVuaW5ncyBjcmVhdGVkJyk7XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgdGhlIGRiIGluc3RhbmNlIGluIG1vZHVsZSBzdGF0ZVxuICAgIGRiSW5zdGFuY2UgPSBkYjtcbiAgICByZXR1cm4gZGI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgaW5pdGlhbGl6YXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIEdldCBkYXRhYmFzZSBpbnN0YW5jZVxubGV0IGRiSW5zdGFuY2U6IERCSW5zdGFuY2UgPSBudWxsO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0REIoKSB7XG4gIGlmICghaXNTZXJ2ZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIG9wZXJhdGlvbnMgY2FuIG9ubHkgYmUgcGVyZm9ybWVkIG9uIHRoZSBzZXJ2ZXInKTtcbiAgfVxuICBcbiAgaWYgKCFkYkluc3RhbmNlKSB7XG4gICAgZGJJbnN0YW5jZSA9IGF3YWl0IGluaXRpYWxpemVEQigpO1xuICB9XG4gIHJldHVybiBkYkluc3RhbmNlO1xufVxuXG4vLyBDbG9zZSBkYXRhYmFzZSBjb25uZWN0aW9uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xvc2VEQigpIHtcbiAgaWYgKCFpc1NlcnZlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2Ugb3BlcmF0aW9ucyBjYW4gb25seSBiZSBwZXJmb3JtZWQgb24gdGhlIHNlcnZlcicpO1xuICB9XG4gIFxuICBpZiAoZGJJbnN0YW5jZSkge1xuICAgIGF3YWl0IGRiSW5zdGFuY2UuY2xvc2UoKTtcbiAgICBkYkluc3RhbmNlID0gbnVsbDtcbiAgfVxufSAiXSwibmFtZXMiOlsiaXNTZXJ2ZXIiLCJpbml0aWFsaXplREIiLCJFcnJvciIsIm9wZW4iLCJzcWxpdGUzIiwiYmNyeXB0IiwicGF0aCIsInVybCIsImZzIiwiX19maWxlbmFtZSIsImZpbGVVUkxUb1BhdGgiLCJfX2Rpcm5hbWUiLCJkaXJuYW1lIiwiREJfUEFUSCIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiY29uc29sZSIsImxvZyIsImRiIiwiZmlsZW5hbWUiLCJkcml2ZXIiLCJkZWZhdWx0IiwiRGF0YWJhc2UiLCJleGVjIiwidGFibGVJbmZvIiwiYWxsIiwiZG9jdW1lbnRDb2x1bW5FeGlzdHMiLCJzb21lIiwiY29sdW1uIiwibmFtZSIsImVycm9yIiwiYWRtaW5Vc2VyIiwiZ2V0IiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwicnVuIiwiY2F0ZWdvcmllc0NvdW50IiwiY291bnQiLCJkZWZhdWx0Q2F0ZWdvcmllcyIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJwcm9kdWN0c0NvdW50IiwicHJvZHVjdHNKc29uUGF0aCIsInByb2R1Y3RzIiwiZXhpc3RzU3luYyIsInByb2R1Y3RzSnNvbiIsInJlYWRGaWxlU3luYyIsIkpTT04iLCJwYXJzZSIsImlkIiwiaW1hZ2UiLCJzcGVjcyIsInVzZUNhc2VzIiwicHJvZHVjdCIsInN0cmluZ2lmeSIsImxlbmd0aCIsImpvYk9wZW5pbmdzQ291bnQiLCJkZWZhdWx0Sm9icyIsInRpdGxlIiwiZGVwYXJ0bWVudCIsImxvY2F0aW9uIiwidHlwZSIsImpvYiIsImRiSW5zdGFuY2UiLCJnZXREQiIsImNsb3NlREIiLCJjbG9zZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjob-openings&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fjob-openings%2Findex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();