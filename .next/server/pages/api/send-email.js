"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/send-email";
exports.ids = ["pages/api/send-email"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("nodemailer");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsend-email&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsend-email.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsend-email&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsend-email.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_send_email_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/send-email.ts */ \"(api)/./pages/api/send-email.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_send_email_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_send_email_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_send_email_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_send_email_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/send-email\",\n        pathname: \"/api/send-email\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_send_email_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNlbmQtZW1haWwmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnNlbmQtZW1haWwudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDc0Q7QUFDdEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHFEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxxREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlLXJlYWN0LXR5cGVzY3JpcHQtc3RhcnRlci8/ZWRjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL3NlbmQtZW1haWwudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zZW5kLWVtYWlsXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc2VuZC1lbWFpbFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsend-email&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsend-email.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/send-email.ts":
/*!*********************************!*\
  !*** ./pages/api/send-email.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"nodemailer\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var querystring__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! querystring */ \"querystring\");\n/* harmony import */ var querystring__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(querystring__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_1__]);\naxios__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nasync function handler(req, res) {\n    if (req.method === \"POST\") {\n        const { name, email, subject, message } = req.body;\n        if (!name || !email || !subject || !message) {\n            return res.status(400).json({\n                error: \"All fields are required.\"\n            });\n        }\n        const oauthClientId = process.env.OAUTH_CLIENT_ID;\n        const oauthClientSecret = process.env.OAUTH_CLIENT_SECRET;\n        const oauthTenantId = process.env.OAUTH_TENANT_ID;\n        const oauthUserEmail = process.env.OAUTH_USER_EMAIL;\n        const contactFormReceiverEmail = process.env.CONTACT_FORM_RECEIVER_EMAIL;\n        if (!oauthClientId || !oauthClientSecret || !oauthTenantId || !oauthUserEmail || !contactFormReceiverEmail) {\n            console.error(\"Email configuration environment variables are not fully set.\");\n            return res.status(500).json({\n                error: \"Server configuration error for email.\",\n                details: \"Required email environment variables missing.\"\n            });\n        }\n        let accessToken = \"\";\n        try {\n            console.log(\"Attempting to fetch OAuth2 access token...\");\n            const tokenUrl = `https://login.microsoftonline.com/${oauthTenantId}/oauth2/v2.0/token`;\n            const tokenRequestBody = {\n                client_id: oauthClientId,\n                client_secret: oauthClientSecret,\n                scope: \"https://outlook.office.com/.default\",\n                grant_type: \"client_credentials\"\n            };\n            const tokenResponse = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].post(tokenUrl, querystring__WEBPACK_IMPORTED_MODULE_2___default().stringify(tokenRequestBody), {\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            });\n            accessToken = tokenResponse.data.access_token;\n            if (!accessToken) {\n                throw new Error(\"Access token not found in Microsoft token response.\");\n            }\n            console.log(\"Successfully fetched OAuth2 access token.\");\n        } catch (tokenError) {\n            console.error(\"--- Error Fetching OAuth2 Token ---\");\n            console.error(\"Request URL:\", `https://login.microsoftonline.com/${oauthTenantId}/oauth2/v2.0/token`);\n            console.error(\"Request Body Sent (client_secret redacted):\", {\n                client_id: oauthClientId,\n                client_secret: \"[REDACTED]\",\n                scope: \"https://outlook.office.com/.default\",\n                grant_type: \"client_credentials\"\n            });\n            if (tokenError.response) {\n                console.error(\"Response Status:\", tokenError.response.status);\n                console.error(\"Response Headers:\", JSON.stringify(tokenError.response.headers, null, 2));\n                console.error(\"Response Data:\", JSON.stringify(tokenError.response.data, null, 2));\n                const errorDesc = tokenError.response.data?.error_description || \"No error_description from token endpoint.\";\n                return res.status(500).json({\n                    error: \"Failed to obtain OAuth2 access token.\",\n                    details: errorDesc\n                });\n            } else if (tokenError.request) {\n                console.error(\"No response received for token request:\", tokenError.request);\n                return res.status(500).json({\n                    error: \"Failed to obtain OAuth2 access token.\",\n                    details: \"No response from token server.\"\n                });\n            } else {\n                console.error(\"Error setting up token request:\", tokenError.message);\n                return res.status(500).json({\n                    error: \"Failed to obtain OAuth2 access token.\",\n                    details: tokenError.message\n                });\n            }\n        }\n        try {\n            console.log(\"Initializing Nodemailer transporter with OAuth2 token...\");\n            const transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransport({\n                host: \"smtp.office365.com\",\n                port: 587,\n                secure: false,\n                auth: {\n                    type: \"OAuth2\",\n                    user: oauthUserEmail,\n                    clientId: oauthClientId,\n                    clientSecret: oauthClientSecret,\n                    accessToken: accessToken\n                },\n                debug: true,\n                logger: true\n            });\n            const mailOptions = {\n                from: `\"${name}\" <${oauthUserEmail}>`,\n                replyTo: email,\n                to: contactFormReceiverEmail,\n                subject: `Contact Form: ${subject}`,\n                text: `You have a new message from ${name} (${email}):\\n\\n${message}`,\n                html: `\n          <div style=\"font-family: Arial, sans-serif; line-height: 1.6;\">\n            <h2 style=\"color: #333;\">New Contact Form Submission</h2>\n            <p><strong>Name:</strong> ${name}</p>\n            <p><strong>Email:</strong> <a href=\"mailto:${email}\">${email}</a></p>\n            <p><strong>Subject:</strong> ${subject}</p>\n            <hr style=\"border: 0; border-top: 1px solid #eee; margin: 20px 0;\">\n            <p><strong>Message:</strong></p>\n            <p style=\"white-space: pre-wrap; background-color: #f9f9f9; padding: 15px; border-radius: 5px;\">${message}</p>\n            <hr style=\"border: 0; border-top: 1px solid #eee; margin: 20px 0;\">\n            <p style=\"font-size: 0.9em; color: #777;\">This email was sent from the contact form on your website.</p>\n          </div>\n        `\n            };\n            console.log(\"Attempting to send email with OAuth2 token...\");\n            await transporter.sendMail(mailOptions);\n            console.log(\"Email sent successfully with OAuth2 token.\");\n            return res.status(200).json({\n                success: true,\n                message: \"Email sent successfully!\"\n            });\n        } catch (mailError) {\n            console.error(\"--- Full Error Object Start (Mail Sending with OAuth2) ---\");\n            console.error(mailError);\n            console.error(\"--- Full Error Object End (Mail Sending with OAuth2) ---\");\n            let detailedErrorMessage = \"Unknown error during email sending after obtaining token.\";\n            if (mailError instanceof Error) {\n                detailedErrorMessage = mailError.message;\n            } else if (typeof mailError === \"string\") {\n                detailedErrorMessage = mailError;\n            }\n            if (mailError.code) {\n                console.error(\"Nodemailer Mail Error Code:\", mailError.code);\n                detailedErrorMessage += ` | Nodemailer Code: ${mailError.code}`;\n            }\n            if (mailError.responseBody) {\n                console.error(\"Mail Error Response Body:\", mailError.responseBody);\n                detailedErrorMessage += ` | Mail Error Response Body: ${mailError.responseBody}`;\n            }\n            if (mailError.stack) {\n                console.error(\"Mail Error Stack:\", mailError.stack);\n            }\n            return res.status(500).json({\n                error: \"Failed to send email.\",\n                details: detailedErrorMessage\n            });\n        }\n    } else {\n        res.setHeader(\"Allow\", [\n            \"POST\"\n        ]);\n        res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvc2VuZC1lbWFpbC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFDeUM7QUFDZjtBQUNZO0FBZ0J2QixlQUFlRyxRQUM1QkMsR0FBbUIsRUFDbkJDLEdBQW9CO0lBRXBCLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxFQUFFLEdBQUdOLElBQUlPLElBQUk7UUFFbEQsSUFBSSxDQUFDSixRQUFRLENBQUNDLFNBQVMsQ0FBQ0MsV0FBVyxDQUFDQyxTQUFTO1lBQzNDLE9BQU9MLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBMkI7UUFDbEU7UUFFQSxNQUFNQyxnQkFBZ0JDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtRQUNqRCxNQUFNQyxvQkFBb0JILFFBQVFDLEdBQUcsQ0FBQ0csbUJBQW1CO1FBQ3pELE1BQU1DLGdCQUFnQkwsUUFBUUMsR0FBRyxDQUFDSyxlQUFlO1FBQ2pELE1BQU1DLGlCQUFpQlAsUUFBUUMsR0FBRyxDQUFDTyxnQkFBZ0I7UUFDbkQsTUFBTUMsMkJBQTJCVCxRQUFRQyxHQUFHLENBQUNTLDJCQUEyQjtRQUV4RSxJQUFJLENBQUNYLGlCQUFpQixDQUFDSSxxQkFBcUIsQ0FBQ0UsaUJBQWlCLENBQUNFLGtCQUFrQixDQUFDRSwwQkFBMEI7WUFDMUdFLFFBQVFiLEtBQUssQ0FBQztZQUNkLE9BQU9ULElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87Z0JBQXlDYyxTQUFTO1lBQWdEO1FBQ3pJO1FBRUEsSUFBSUMsY0FBYztRQUVsQixJQUFJO1lBQ0ZGLFFBQVFHLEdBQUcsQ0FBQztZQUNaLE1BQU1DLFdBQVcsQ0FBQyxrQ0FBa0MsRUFBRVYsY0FBYyxrQkFBa0IsQ0FBQztZQUN2RixNQUFNVyxtQkFBbUI7Z0JBQ3ZCQyxXQUFXbEI7Z0JBQ1htQixlQUFlZjtnQkFDZmdCLE9BQU87Z0JBQ1BDLFlBQVk7WUFDZDtZQUVBLE1BQU1DLGdCQUFnQixNQUFNcEMsa0RBQVUsQ0FDcEM4QixVQUNBN0IsNERBQXFCLENBQUM4QixtQkFDdEI7Z0JBQ0VRLFNBQVM7b0JBQ1AsZ0JBQWdCO2dCQUNsQjtZQUNGO1lBR0ZYLGNBQWNRLGNBQWNJLElBQUksQ0FBQ0MsWUFBWTtZQUM3QyxJQUFJLENBQUNiLGFBQWE7Z0JBQ2hCLE1BQU0sSUFBSWMsTUFBTTtZQUNsQjtZQUNBaEIsUUFBUUcsR0FBRyxDQUFDO1FBRWQsRUFBRSxPQUFPYyxZQUFpQjtZQUN4QmpCLFFBQVFiLEtBQUssQ0FBQztZQUNkYSxRQUFRYixLQUFLLENBQUMsZ0JBQWdCLENBQUMsa0NBQWtDLEVBQUVPLGNBQWMsa0JBQWtCLENBQUM7WUFDcEdNLFFBQVFiLEtBQUssQ0FBQywrQ0FBK0M7Z0JBQzNEbUIsV0FBV2xCO2dCQUNYbUIsZUFBZTtnQkFDZkMsT0FBTztnQkFDUEMsWUFBWTtZQUNkO1lBQ0EsSUFBSVEsV0FBV0MsUUFBUSxFQUFFO2dCQUN2QmxCLFFBQVFiLEtBQUssQ0FBQyxvQkFBb0I4QixXQUFXQyxRQUFRLENBQUNqQyxNQUFNO2dCQUM1RGUsUUFBUWIsS0FBSyxDQUFDLHFCQUFxQmdDLEtBQUtQLFNBQVMsQ0FBQ0ssV0FBV0MsUUFBUSxDQUFDTCxPQUFPLEVBQUUsTUFBTTtnQkFDckZiLFFBQVFiLEtBQUssQ0FBQyxrQkFBa0JnQyxLQUFLUCxTQUFTLENBQUNLLFdBQVdDLFFBQVEsQ0FBQ0osSUFBSSxFQUFFLE1BQU07Z0JBQy9FLE1BQU1NLFlBQVlILFdBQVdDLFFBQVEsQ0FBQ0osSUFBSSxFQUFFTyxxQkFBcUI7Z0JBQ2pFLE9BQU8zQyxJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUFFQyxPQUFPO29CQUF5Q2MsU0FBU21CO2dCQUFVO1lBQ25HLE9BQU8sSUFBSUgsV0FBV0ssT0FBTyxFQUFFO2dCQUM3QnRCLFFBQVFiLEtBQUssQ0FBQywyQ0FBMkM4QixXQUFXSyxPQUFPO2dCQUMzRSxPQUFPNUMsSUFBSU8sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsT0FBTztvQkFBeUNjLFNBQVM7Z0JBQWlDO1lBQzFILE9BQU87Z0JBQ0xELFFBQVFiLEtBQUssQ0FBQyxtQ0FBbUM4QixXQUFXbEMsT0FBTztnQkFDbkUsT0FBT0wsSUFBSU8sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsT0FBTztvQkFBeUNjLFNBQVNnQixXQUFXbEMsT0FBTztnQkFBQztZQUM1RztRQUNGO1FBRUEsSUFBSTtZQUNGaUIsUUFBUUcsR0FBRyxDQUFDO1lBQ1osTUFBTW9CLGNBQWNsRCx1REFBMEIsQ0FBQztnQkFDN0NvRCxNQUFNO2dCQUNOQyxNQUFNO2dCQUNOQyxRQUFRO2dCQUNSQyxNQUFNO29CQUNKQyxNQUFNO29CQUNOQyxNQUFNbEM7b0JBQ05tQyxVQUFVM0M7b0JBQ1Y0QyxjQUFjeEM7b0JBQ2RVLGFBQWFBO2dCQUNmO2dCQUNBK0IsT0FBTztnQkFDUEMsUUFBUTtZQUNWO1lBRUEsTUFBTUMsY0FBYztnQkFDbEJDLE1BQU0sQ0FBQyxDQUFDLEVBQUV4RCxLQUFLLEdBQUcsRUFBRWdCLGVBQWUsQ0FBQyxDQUFDO2dCQUNyQ3lDLFNBQVN4RDtnQkFDVHlELElBQUl4QztnQkFDSmhCLFNBQVMsQ0FBQyxjQUFjLEVBQUVBLFFBQVEsQ0FBQztnQkFDbkN5RCxNQUFNLENBQUMsNEJBQTRCLEVBQUUzRCxLQUFLLEVBQUUsRUFBRUMsTUFBTSxNQUFNLEVBQUVFLFFBQVEsQ0FBQztnQkFDckV5RCxNQUFNLENBQUM7OztzQ0FHdUIsRUFBRTVELEtBQUs7dURBQ1UsRUFBRUMsTUFBTSxFQUFFLEVBQUVBLE1BQU07eUNBQ2hDLEVBQUVDLFFBQVE7Ozs0R0FHeUQsRUFBRUMsUUFBUTs7OztRQUk5RyxDQUFDO1lBQ0g7WUFFQWlCLFFBQVFHLEdBQUcsQ0FBQztZQUNaLE1BQU1vQixZQUFZa0IsUUFBUSxDQUFDTjtZQUMzQm5DLFFBQVFHLEdBQUcsQ0FBQztZQUNaLE9BQU96QixJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFd0QsU0FBUztnQkFBTTNELFNBQVM7WUFBMkI7UUFFbkYsRUFBRSxPQUFPNEQsV0FBZ0I7WUFDdkIzQyxRQUFRYixLQUFLLENBQUM7WUFDZGEsUUFBUWIsS0FBSyxDQUFDd0Q7WUFDZDNDLFFBQVFiLEtBQUssQ0FBQztZQUVkLElBQUl5RCx1QkFBdUI7WUFDM0IsSUFBSUQscUJBQXFCM0IsT0FBTztnQkFDOUI0Qix1QkFBdUJELFVBQVU1RCxPQUFPO1lBQzFDLE9BQU8sSUFBSSxPQUFPNEQsY0FBYyxVQUFVO2dCQUN4Q0MsdUJBQXVCRDtZQUN6QjtZQUVBLElBQUlBLFVBQVVFLElBQUksRUFBRTtnQkFDbEI3QyxRQUFRYixLQUFLLENBQUMsK0JBQStCd0QsVUFBVUUsSUFBSTtnQkFDM0RELHdCQUF3QixDQUFDLG9CQUFvQixFQUFFRCxVQUFVRSxJQUFJLENBQUMsQ0FBQztZQUNqRTtZQUNBLElBQUlGLFVBQVVHLFlBQVksRUFBRTtnQkFDMUI5QyxRQUFRYixLQUFLLENBQUMsNkJBQTZCd0QsVUFBVUcsWUFBWTtnQkFDakVGLHdCQUF3QixDQUFDLDZCQUE2QixFQUFFRCxVQUFVRyxZQUFZLENBQUMsQ0FBQztZQUNsRjtZQUNBLElBQUlILFVBQVVJLEtBQUssRUFBRTtnQkFDbkIvQyxRQUFRYixLQUFLLENBQUMscUJBQXFCd0QsVUFBVUksS0FBSztZQUNwRDtZQUNBLE9BQU9yRSxJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO2dCQUF5QmMsU0FBUzJDO1lBQXFCO1FBQzlGO0lBQ0YsT0FBTztRQUNMbEUsSUFBSXNFLFNBQVMsQ0FBQyxTQUFTO1lBQUM7U0FBTztRQUMvQnRFLElBQUlPLE1BQU0sQ0FBQyxLQUFLZ0UsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFeEUsSUFBSUUsTUFBTSxDQUFDLFlBQVksQ0FBQztJQUN4RDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZS1yZWFjdC10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9wYWdlcy9hcGkvc2VuZC1lbWFpbC50cz9mMmNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0ICogYXMgbm9kZW1haWxlciBmcm9tICdub2RlbWFpbGVyJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgcXVlcnlzdHJpbmcgZnJvbSAncXVlcnlzdHJpbmcnO1xuXG5pbnRlcmZhY2UgRW1haWxSZXF1ZXN0Qm9keSB7XG4gIG5hbWU6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgc3ViamVjdDogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBPQXV0aFRva2VuUmVzcG9uc2Uge1xuICB0b2tlbl90eXBlOiBzdHJpbmc7XG4gIGV4cGlyZXNfaW46IG51bWJlcjtcbiAgZXh0X2V4cGlyZXNfaW46IG51bWJlcjtcbiAgYWNjZXNzX3Rva2VuOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXG4pIHtcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xuICAgIGNvbnN0IHsgbmFtZSwgZW1haWwsIHN1YmplY3QsIG1lc3NhZ2UgfSA9IHJlcS5ib2R5IGFzIEVtYWlsUmVxdWVzdEJvZHk7XG5cbiAgICBpZiAoIW5hbWUgfHwgIWVtYWlsIHx8ICFzdWJqZWN0IHx8ICFtZXNzYWdlKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0FsbCBmaWVsZHMgYXJlIHJlcXVpcmVkLicgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgb2F1dGhDbGllbnRJZCA9IHByb2Nlc3MuZW52Lk9BVVRIX0NMSUVOVF9JRDtcbiAgICBjb25zdCBvYXV0aENsaWVudFNlY3JldCA9IHByb2Nlc3MuZW52Lk9BVVRIX0NMSUVOVF9TRUNSRVQ7XG4gICAgY29uc3Qgb2F1dGhUZW5hbnRJZCA9IHByb2Nlc3MuZW52Lk9BVVRIX1RFTkFOVF9JRDtcbiAgICBjb25zdCBvYXV0aFVzZXJFbWFpbCA9IHByb2Nlc3MuZW52Lk9BVVRIX1VTRVJfRU1BSUw7IFxuICAgIGNvbnN0IGNvbnRhY3RGb3JtUmVjZWl2ZXJFbWFpbCA9IHByb2Nlc3MuZW52LkNPTlRBQ1RfRk9STV9SRUNFSVZFUl9FTUFJTDtcblxuICAgIGlmICghb2F1dGhDbGllbnRJZCB8fCAhb2F1dGhDbGllbnRTZWNyZXQgfHwgIW9hdXRoVGVuYW50SWQgfHwgIW9hdXRoVXNlckVtYWlsIHx8ICFjb250YWN0Rm9ybVJlY2VpdmVyRW1haWwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VtYWlsIGNvbmZpZ3VyYXRpb24gZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBub3QgZnVsbHkgc2V0LicpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdTZXJ2ZXIgY29uZmlndXJhdGlvbiBlcnJvciBmb3IgZW1haWwuJywgZGV0YWlsczogJ1JlcXVpcmVkIGVtYWlsIGVudmlyb25tZW50IHZhcmlhYmxlcyBtaXNzaW5nLicgfSk7XG4gICAgfVxuXG4gICAgbGV0IGFjY2Vzc1Rva2VuID0gJyc7XG5cbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgdG8gZmV0Y2ggT0F1dGgyIGFjY2VzcyB0b2tlbi4uLicpO1xuICAgICAgY29uc3QgdG9rZW5VcmwgPSBgaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLyR7b2F1dGhUZW5hbnRJZH0vb2F1dGgyL3YyLjAvdG9rZW5gO1xuICAgICAgY29uc3QgdG9rZW5SZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgY2xpZW50X2lkOiBvYXV0aENsaWVudElkLFxuICAgICAgICBjbGllbnRfc2VjcmV0OiBvYXV0aENsaWVudFNlY3JldCxcbiAgICAgICAgc2NvcGU6ICdodHRwczovL291dGxvb2sub2ZmaWNlLmNvbS8uZGVmYXVsdCcsXG4gICAgICAgIGdyYW50X3R5cGU6ICdjbGllbnRfY3JlZGVudGlhbHMnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdG9rZW5SZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3Q8T0F1dGhUb2tlblJlc3BvbnNlPihcbiAgICAgICAgdG9rZW5VcmwsXG4gICAgICAgIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeSh0b2tlblJlcXVlc3RCb2R5KSxcbiAgICAgICAge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhY2Nlc3NUb2tlbiA9IHRva2VuUmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW47XG4gICAgICBpZiAoIWFjY2Vzc1Rva2VuKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQWNjZXNzIHRva2VuIG5vdCBmb3VuZCBpbiBNaWNyb3NvZnQgdG9rZW4gcmVzcG9uc2UuJyk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGZldGNoZWQgT0F1dGgyIGFjY2VzcyB0b2tlbi4nKTtcblxuICAgIH0gY2F0Y2ggKHRva2VuRXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignLS0tIEVycm9yIEZldGNoaW5nIE9BdXRoMiBUb2tlbiAtLS0nKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1JlcXVlc3QgVVJMOicsIGBodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vJHtvYXV0aFRlbmFudElkfS9vYXV0aDIvdjIuMC90b2tlbmApO1xuICAgICAgY29uc29sZS5lcnJvcignUmVxdWVzdCBCb2R5IFNlbnQgKGNsaWVudF9zZWNyZXQgcmVkYWN0ZWQpOicsIHtcbiAgICAgICAgY2xpZW50X2lkOiBvYXV0aENsaWVudElkLFxuICAgICAgICBjbGllbnRfc2VjcmV0OiAnW1JFREFDVEVEXScsXG4gICAgICAgIHNjb3BlOiAnaHR0cHM6Ly9vdXRsb29rLm9mZmljZS5jb20vLmRlZmF1bHQnLFxuICAgICAgICBncmFudF90eXBlOiAnY2xpZW50X2NyZWRlbnRpYWxzJyxcbiAgICAgIH0pO1xuICAgICAgaWYgKHRva2VuRXJyb3IucmVzcG9uc2UpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignUmVzcG9uc2UgU3RhdHVzOicsIHRva2VuRXJyb3IucmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignUmVzcG9uc2UgSGVhZGVyczonLCBKU09OLnN0cmluZ2lmeSh0b2tlbkVycm9yLnJlc3BvbnNlLmhlYWRlcnMsIG51bGwsIDIpKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignUmVzcG9uc2UgRGF0YTonLCBKU09OLnN0cmluZ2lmeSh0b2tlbkVycm9yLnJlc3BvbnNlLmRhdGEsIG51bGwsIDIpKTtcbiAgICAgICAgY29uc3QgZXJyb3JEZXNjID0gdG9rZW5FcnJvci5yZXNwb25zZS5kYXRhPy5lcnJvcl9kZXNjcmlwdGlvbiB8fCAnTm8gZXJyb3JfZGVzY3JpcHRpb24gZnJvbSB0b2tlbiBlbmRwb2ludC4nO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBvYnRhaW4gT0F1dGgyIGFjY2VzcyB0b2tlbi4nLCBkZXRhaWxzOiBlcnJvckRlc2MgfSk7XG4gICAgICB9IGVsc2UgaWYgKHRva2VuRXJyb3IucmVxdWVzdCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdObyByZXNwb25zZSByZWNlaXZlZCBmb3IgdG9rZW4gcmVxdWVzdDonLCB0b2tlbkVycm9yLnJlcXVlc3QpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBvYnRhaW4gT0F1dGgyIGFjY2VzcyB0b2tlbi4nLCBkZXRhaWxzOiAnTm8gcmVzcG9uc2UgZnJvbSB0b2tlbiBzZXJ2ZXIuJyB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNldHRpbmcgdXAgdG9rZW4gcmVxdWVzdDonLCB0b2tlbkVycm9yLm1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBvYnRhaW4gT0F1dGgyIGFjY2VzcyB0b2tlbi4nLCBkZXRhaWxzOiB0b2tlbkVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnSW5pdGlhbGl6aW5nIE5vZGVtYWlsZXIgdHJhbnNwb3J0ZXIgd2l0aCBPQXV0aDIgdG9rZW4uLi4nKTtcbiAgICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xuICAgICAgICBob3N0OiAnc210cC5vZmZpY2UzNjUuY29tJyxcbiAgICAgICAgcG9ydDogNTg3LFxuICAgICAgICBzZWN1cmU6IGZhbHNlLFxuICAgICAgICBhdXRoOiB7XG4gICAgICAgICAgdHlwZTogJ09BdXRoMicsXG4gICAgICAgICAgdXNlcjogb2F1dGhVc2VyRW1haWwsXG4gICAgICAgICAgY2xpZW50SWQ6IG9hdXRoQ2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvYXV0aENsaWVudFNlY3JldCxcbiAgICAgICAgICBhY2Nlc3NUb2tlbjogYWNjZXNzVG9rZW4sXG4gICAgICAgIH0sXG4gICAgICAgIGRlYnVnOiB0cnVlLCBcbiAgICAgICAgbG9nZ2VyOiB0cnVlIFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xuICAgICAgICBmcm9tOiBgXCIke25hbWV9XCIgPCR7b2F1dGhVc2VyRW1haWx9PmAsXG4gICAgICAgIHJlcGx5VG86IGVtYWlsLFxuICAgICAgICB0bzogY29udGFjdEZvcm1SZWNlaXZlckVtYWlsLFxuICAgICAgICBzdWJqZWN0OiBgQ29udGFjdCBGb3JtOiAke3N1YmplY3R9YCxcbiAgICAgICAgdGV4dDogYFlvdSBoYXZlIGEgbmV3IG1lc3NhZ2UgZnJvbSAke25hbWV9ICgke2VtYWlsfSk6XFxuXFxuJHttZXNzYWdlfWAsXG4gICAgICAgIGh0bWw6IGBcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBsaW5lLWhlaWdodDogMS42O1wiPlxuICAgICAgICAgICAgPGgyIHN0eWxlPVwiY29sb3I6ICMzMzM7XCI+TmV3IENvbnRhY3QgRm9ybSBTdWJtaXNzaW9uPC9oMj5cbiAgICAgICAgICAgIDxwPjxzdHJvbmc+TmFtZTo8L3N0cm9uZz4gJHtuYW1lfTwvcD5cbiAgICAgICAgICAgIDxwPjxzdHJvbmc+RW1haWw6PC9zdHJvbmc+IDxhIGhyZWY9XCJtYWlsdG86JHtlbWFpbH1cIj4ke2VtYWlsfTwvYT48L3A+XG4gICAgICAgICAgICA8cD48c3Ryb25nPlN1YmplY3Q6PC9zdHJvbmc+ICR7c3ViamVjdH08L3A+XG4gICAgICAgICAgICA8aHIgc3R5bGU9XCJib3JkZXI6IDA7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyBtYXJnaW46IDIwcHggMDtcIj5cbiAgICAgICAgICAgIDxwPjxzdHJvbmc+TWVzc2FnZTo8L3N0cm9uZz48L3A+XG4gICAgICAgICAgICA8cCBzdHlsZT1cIndoaXRlLXNwYWNlOiBwcmUtd3JhcDsgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogNXB4O1wiPiR7bWVzc2FnZX08L3A+XG4gICAgICAgICAgICA8aHIgc3R5bGU9XCJib3JkZXI6IDA7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyBtYXJnaW46IDIwcHggMDtcIj5cbiAgICAgICAgICAgIDxwIHN0eWxlPVwiZm9udC1zaXplOiAwLjllbTsgY29sb3I6ICM3Nzc7XCI+VGhpcyBlbWFpbCB3YXMgc2VudCBmcm9tIHRoZSBjb250YWN0IGZvcm0gb24geW91ciB3ZWJzaXRlLjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIHNlbmQgZW1haWwgd2l0aCBPQXV0aDIgdG9rZW4uLi4nKTtcbiAgICAgIGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcbiAgICAgIGNvbnNvbGUubG9nKCdFbWFpbCBzZW50IHN1Y2Nlc3NmdWxseSB3aXRoIE9BdXRoMiB0b2tlbi4nKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdFbWFpbCBzZW50IHN1Y2Nlc3NmdWxseSEnIH0pO1xuXG4gICAgfSBjYXRjaCAobWFpbEVycm9yOiBhbnkpIHsgXG4gICAgICBjb25zb2xlLmVycm9yKCctLS0gRnVsbCBFcnJvciBPYmplY3QgU3RhcnQgKE1haWwgU2VuZGluZyB3aXRoIE9BdXRoMikgLS0tJyk7XG4gICAgICBjb25zb2xlLmVycm9yKG1haWxFcnJvcik7IFxuICAgICAgY29uc29sZS5lcnJvcignLS0tIEZ1bGwgRXJyb3IgT2JqZWN0IEVuZCAoTWFpbCBTZW5kaW5nIHdpdGggT0F1dGgyKSAtLS0nKTtcblxuICAgICAgbGV0IGRldGFpbGVkRXJyb3JNZXNzYWdlID0gJ1Vua25vd24gZXJyb3IgZHVyaW5nIGVtYWlsIHNlbmRpbmcgYWZ0ZXIgb2J0YWluaW5nIHRva2VuLic7XG4gICAgICBpZiAobWFpbEVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHsgXG4gICAgICAgIGRldGFpbGVkRXJyb3JNZXNzYWdlID0gbWFpbEVycm9yLm1lc3NhZ2U7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtYWlsRXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGRldGFpbGVkRXJyb3JNZXNzYWdlID0gbWFpbEVycm9yO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobWFpbEVycm9yLmNvZGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignTm9kZW1haWxlciBNYWlsIEVycm9yIENvZGU6JywgbWFpbEVycm9yLmNvZGUpO1xuICAgICAgICBkZXRhaWxlZEVycm9yTWVzc2FnZSArPSBgIHwgTm9kZW1haWxlciBDb2RlOiAke21haWxFcnJvci5jb2RlfWA7XG4gICAgICB9XG4gICAgICBpZiAobWFpbEVycm9yLnJlc3BvbnNlQm9keSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdNYWlsIEVycm9yIFJlc3BvbnNlIEJvZHk6JywgbWFpbEVycm9yLnJlc3BvbnNlQm9keSk7XG4gICAgICAgIGRldGFpbGVkRXJyb3JNZXNzYWdlICs9IGAgfCBNYWlsIEVycm9yIFJlc3BvbnNlIEJvZHk6ICR7bWFpbEVycm9yLnJlc3BvbnNlQm9keX1gO1xuICAgICAgfVxuICAgICAgaWYgKG1haWxFcnJvci5zdGFjaykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdNYWlsIEVycm9yIFN0YWNrOicsIG1haWxFcnJvci5zdGFjayk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBzZW5kIGVtYWlsLicsIGRldGFpbHM6IGRldGFpbGVkRXJyb3JNZXNzYWdlIH0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnUE9TVCddKTtcbiAgICByZXMuc3RhdHVzKDQwNSkuZW5kKGBNZXRob2QgJHtyZXEubWV0aG9kfSBOb3QgQWxsb3dlZGApO1xuICB9XG59Il0sIm5hbWVzIjpbIm5vZGVtYWlsZXIiLCJheGlvcyIsInF1ZXJ5c3RyaW5nIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsIm5hbWUiLCJlbWFpbCIsInN1YmplY3QiLCJtZXNzYWdlIiwiYm9keSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm9hdXRoQ2xpZW50SWQiLCJwcm9jZXNzIiwiZW52IiwiT0FVVEhfQ0xJRU5UX0lEIiwib2F1dGhDbGllbnRTZWNyZXQiLCJPQVVUSF9DTElFTlRfU0VDUkVUIiwib2F1dGhUZW5hbnRJZCIsIk9BVVRIX1RFTkFOVF9JRCIsIm9hdXRoVXNlckVtYWlsIiwiT0FVVEhfVVNFUl9FTUFJTCIsImNvbnRhY3RGb3JtUmVjZWl2ZXJFbWFpbCIsIkNPTlRBQ1RfRk9STV9SRUNFSVZFUl9FTUFJTCIsImNvbnNvbGUiLCJkZXRhaWxzIiwiYWNjZXNzVG9rZW4iLCJsb2ciLCJ0b2tlblVybCIsInRva2VuUmVxdWVzdEJvZHkiLCJjbGllbnRfaWQiLCJjbGllbnRfc2VjcmV0Iiwic2NvcGUiLCJncmFudF90eXBlIiwidG9rZW5SZXNwb25zZSIsInBvc3QiLCJzdHJpbmdpZnkiLCJoZWFkZXJzIiwiZGF0YSIsImFjY2Vzc190b2tlbiIsIkVycm9yIiwidG9rZW5FcnJvciIsInJlc3BvbnNlIiwiSlNPTiIsImVycm9yRGVzYyIsImVycm9yX2Rlc2NyaXB0aW9uIiwicmVxdWVzdCIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiaG9zdCIsInBvcnQiLCJzZWN1cmUiLCJhdXRoIiwidHlwZSIsInVzZXIiLCJjbGllbnRJZCIsImNsaWVudFNlY3JldCIsImRlYnVnIiwibG9nZ2VyIiwibWFpbE9wdGlvbnMiLCJmcm9tIiwicmVwbHlUbyIsInRvIiwidGV4dCIsImh0bWwiLCJzZW5kTWFpbCIsInN1Y2Nlc3MiLCJtYWlsRXJyb3IiLCJkZXRhaWxlZEVycm9yTWVzc2FnZSIsImNvZGUiLCJyZXNwb25zZUJvZHkiLCJzdGFjayIsInNldEhlYWRlciIsImVuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/send-email.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsend-email&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsend-email.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();